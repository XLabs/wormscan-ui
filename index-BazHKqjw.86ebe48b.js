!function(e,t,r,i,n){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof a[i]&&a[i],o=s.cache||{},u="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(t,r){if(!o[t]){if(!e[t]){var n="function"==typeof a[i]&&a[i];if(!r&&n)return n(t,!0);if(s)return s(t,!0);if(u&&"string"==typeof t)return u(t);var c=Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}f.resolve=function(r){var i=e[t][1][r];return null!=i?i:r},f.cache={};var d=o[t]=new l.Module(t);e[t][0].call(d.exports,f,d,d.exports,a)}return o[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:l(t)}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=e,l.cache=o,l.parent=s,l.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(l,"root",{get:function(){return a[i]}}),a[i]=l;for(var c=0;c<t.length;c++)l(t[c])}({"68ufG":[function(e,t,r,i){let n;var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"SuiCircleBridge",()=>rE);var s=e("./index-DTF6KsXj.mjs"),o=e("./sui-Dhwkelcg.mjs"),u=e("./unsignedTransaction-BD81leu1.mjs"),l=Object.defineProperty,c=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t,r)=>c(e,"symbol"!=typeof t?t+"":t,r);class f extends TypeError{constructor(e,t){let r;let{message:i,explanation:n,...a}=e,{path:s}=e,o=0===s.length?i:`At path: ${s.join(".")} -- ${i}`;super(n??o),null!=n&&(this.cause=o),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function p(e){return"object"==typeof e&&null!=e}function h(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function*g(e,t,r,i){var n;for(let a of(p(n=e)&&"function"==typeof n[Symbol.iterator]||(e=[e]),e)){let e=function(e,t,r,i){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:n,branch:a}=t,{type:s}=r,{refinement:o,message:u=`Expected a value of type \`${s}\`${o?` with refinement \`${o}\``:""}, but received: \`${h(i)}\``}=e;return{value:i,type:s,refinement:o,key:n[n.length-1],path:n,branch:a,...e,message:u}}(a,t,r,i);e&&(yield e)}}function*m(e,t,r={}){let{path:i=[],branch:n=[e],coerce:a=!1,mask:s=!1}=r,o={path:i,branch:n};if(a&&(e=t.coercer(e,o),s&&"type"!==t.type&&p(t.schema)&&p(e)&&!Array.isArray(e)))for(let r in e)void 0===t.schema[r]&&delete e[r];let u="valid";for(let i of t.validator(e,o))i.explanation=r.message,u="not_valid",yield[i,void 0];for(let[l,c,d]of t.entries(e,o))for(let t of m(c,d,{path:void 0===l?i:[...i,l],branch:void 0===l?n:[...n,c],coerce:a,mask:s,message:r.message}))t[0]?(u=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):a&&(c=t[1],void 0===l?e=c:e instanceof Map?e.set(l,c):e instanceof Set?e.add(c):p(e)&&(void 0!==c||l in e)&&(e[l]=c));if("not_valid"!==u)for(let i of t.refiner(e,o))i.explanation=r.message,u="not_refined",yield[i,void 0];"valid"===u&&(yield[void 0,e])}class y{constructor(e){let{type:t,schema:r,validator:i,refiner:n,coercer:a=e=>e,entries:s=function*(){}}=e;this.type=t,this.schema=r,this.entries=s,this.coercer=a,i?this.validator=(e,t)=>g(i(e,t),t,this,e):this.validator=()=>[],n?this.refiner=(e,t)=>g(n(e,t),t,this,e):this.refiner=()=>[]}assert(e,t){return b(e,this,t)}create(e,t){return v(e,this,t)}is(e){return T(e,this)}mask(e,t){return w(e,this,t)}validate(e,t={}){return S(e,this,t)}}function b(e,t,r){let i=S(e,t,{message:r});if(i[0])throw i[0]}function v(e,t,r){let i=S(e,t,{coerce:!0,message:r});if(i[0])throw i[0];return i[1]}function w(e,t,r){let i=S(e,t,{coerce:!0,mask:!0,message:r});if(i[0])throw i[0];return i[1]}function T(e,t){return!S(e,t)[0]}function S(e,t,r={}){let i=m(e,t,r),n=function(e){let{done:t,value:r}=e.next();return t?void 0:r}(i);return n[0]?[new f(n[0],function*(){for(let e of i)e[0]&&(yield e[0])}),void 0]:[void 0,n[1]]}function j(...e){let t="type"===e[0].type,r=Object.assign({},...e.map(e=>e.schema));return t?function(e){let t=Object.keys(e);return new y({type:"type",schema:e,*entries(r){if(p(r))for(let i of t)yield[i,r[i],e[i]]},validator:e=>p(e)||`Expected an object, but received: ${h(e)}`,coercer:e=>p(e)?{...e}:e})}(r):B(r)}function x(e,t){return new y({type:e,schema:null,validator:t})}function E(){return x("any",()=>!0)}function k(e){return new y({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,i]of t.entries())yield[r,i,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${h(e)}`})}function I(){return x("boolean",e=>"boolean"==typeof e)}function A(){return x("integer",e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${h(e)}`)}function O(e){let t=h(e),r=typeof e;return new y({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${h(r)}`})}function $(){return x("never",()=>!1)}function z(e){return new y({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function U(){return x("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${h(e)}`)}function B(e){let t=e?Object.keys(e):[],r=$();return new y({type:"object",schema:e||null,*entries(i){if(e&&p(i)){let n=new Set(Object.keys(i));for(let r of t)n.delete(r),yield[r,i[r],e[r]];for(let e of n)yield[e,i[e],r]}},validator:e=>p(e)||`Expected an object, but received: ${h(e)}`,coercer:e=>p(e)?{...e}:e})}function M(e){return new y({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function C(e,t){return new y({type:"record",schema:null,*entries(r){if(p(r))for(let i in r){let n=r[i];yield[i,i,e],yield[i,n,t]}},validator:e=>p(e)||`Expected an object, but received: ${h(e)}`})}function P(){return x("string",e=>"string"==typeof e||`Expected a string, but received: ${h(e)}`)}function N(e){let t=$();return new y({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let i=Math.max(e.length,r.length);for(let n=0;n<i;n++)yield[n,r[n],e[n]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${h(e)}`})}function _(e){let t=e.map(e=>e.type).join(" | ");return new y({type:"union",schema:null,coercer(t){for(let r of e){let[e,i]=r.validate(t,{coerce:!0});if(!e)return i}return t},validator(r,i){let n=[];for(let t of e){let[...e]=m(r,t,i),[a]=e;if(!a[0])return[];for(let[t]of e)t&&n.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${h(r)}`,...n]}})}function V(){return x("unknown",()=>!0)}let R=_([B({AddressOwner:P()}),B({ObjectOwner:P()}),B({Shared:B({initial_shared_version:z(P())})}),O("Immutable")]);x("SuiJsonValue",()=>!0);let D=_([B({u32:P()}),B({u64:P()}),B({f64:P()})]);B({attributes:C(P(),z(D)),featureFlags:C(P(),I()),maxSupportedProtocolVersion:P(),minSupportedProtocolVersion:P(),protocolVersion:P()}),_([P(),O("package")]);let G=B({digest:P(),objectId:P(),version:_([U(),P(),x("bigint",e=>"bigint"==typeof e)])});B({owner:R,reference:G}),B({objectId:P(),sequenceNumber:P()}),B({payment:k(G),owner:P(),price:P(),budget:P()});let K=j(G,B({type:P(),owner:R,previousTransaction:P()})),F=C(P(),E()),L=C(P(),V()),W=B({type:P(),fields:F,hasPublicTransfer:I()}),J=B({disassembled:L}),q=_([j(W,B({dataType:O("moveObject")})),j(J,B({dataType:O("package")}))]),X=B({type:P(),hasPublicTransfer:I(),version:P(),bcsBytes:P()}),H=B({id:P(),moduleMap:C(P(),P())}),Z=_([j(X,B({dataType:O("moveObject")})),j(H,B({dataType:O("package")}))]);BigInt(1e9);let Q=B({code:P(),error:M(P()),object_id:M(P()),parent_object_id:M(P()),version:M(P()),digest:M(P())}),Y=_([B({data:z(M(C(P(),P()))),error:z(M(Q))}),M(C(P(),P()))]),ee=B({objectId:P(),version:P(),digest:P(),type:z(M(P())),content:z(M(q)),bcs:z(M(Z)),owner:z(M(R)),previousTransaction:z(M(P())),storageRebate:z(M(P())),display:z(M(Y))});B({showType:z(M(I())),showContent:z(M(I())),showBcs:z(M(I())),showOwner:z(M(I())),showPreviousTransaction:z(M(I())),showStorageRebate:z(M(I())),showDisplay:z(M(I()))}),_([O("Exists"),O("notExists"),O("Deleted")]),k(K);let et=B({data:z(M(ee)),error:z(M(Q))});function er(e){if("reference"in e)return e.reference;let t=e.data;return t?{objectId:t.objectId,version:t.version,digest:t.digest}:function(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){let t=e.error;return{objectId:t.object_id,version:t.version,digest:t.digest}}}(e)}B({objectId:P(),atCheckpoint:M(U())}),B({data:k(et),nextCursor:M(z(P())),hasNextPage:I()}),_([B({details:ee,status:O("VersionFound")}),B({details:P(),status:O("ObjectNotExists")}),B({details:G,status:O("ObjectDeleted")}),B({details:N([P(),U()]),status:O("VersionNotFound")}),B({details:B({asked_version:U(),latest_version:U(),object_id:P()}),status:O("VersionTooHigh")})]),k(_([P(),B({Object:P()})]));let ei=B({address:P(),name:P()}),en=_([O("Private"),O("Public"),O("Friend")]),ea=B({abilities:k(P())}),es=B({constraints:ea,isPhantom:I()}),eo=B({TypeParameter:U()}),eu=N([B({module:P(),package:P(),function:P()}),P()]);function el(e){return!!e&&(!!("string"==typeof e||T(e,eo)||ed(e))||"object"==typeof e&&!!(T(e.Reference,ec)||T(e.MutableReference,ec)||T(e.Vector,ec)))}B({rank3Days:k(eu),rank7Days:k(eu),rank30Days:k(eu)});let ec=x("SuiMoveNormalizedType",el);function ed(e){if(!e||"object"!=typeof e||!e.Struct||"object"!=typeof e.Struct)return!1;let t=e.Struct;return!("string"!=typeof t.address||"string"!=typeof t.module||"string"!=typeof t.name||!Array.isArray(t.typeArguments)||!t.typeArguments.every(e=>el(e)))}x("SuiMoveNormalizedStructType",ed);let ef=B({visibility:en,isEntry:I(),typeParameters:k(ea),parameters:k(ec),return:k(ec)}),ep=B({name:P(),type:ec}),eh=B({abilities:ea,typeParameters:k(es),fields:k(ep)}),eg=B({fileFormatVersion:U(),address:P(),name:P(),friends:k(ei),structs:C(P(),eh),exposedFunctions:C(P(),ef)});function em(e){return"object"==typeof e&&"MutableReference"in e?e.MutableReference:void 0}function ey(e){return"object"==typeof e&&"Reference"in e?e.Reference:void 0}function eb(e){if("object"==typeof e&&"Struct"in e)return e;let t=ey(e),r=em(e);return"object"==typeof t&&"Struct"in t?t:"object"==typeof r&&"Struct"in r?r:void 0}C(P(),eg);var ev=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var n=e.charAt(i),a=n.charCodeAt(0);if(255!==t[a])throw TypeError(n+" is ambiguous");t[a]=i}var s=e.length,o=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function c(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,i=0,n=0;e[r]===o;)i++,r++;for(var a=(e.length-r)*u+1>>>0,l=new Uint8Array(a);e[r];){var c=t[e.charCodeAt(r)];if(255===c)return;for(var d=0,f=a-1;(0!==c||d<n)&&-1!==f;f--,d++)c+=s*l[f]>>>0,l[f]=c%256>>>0,c=c/256>>>0;if(0!==c)throw Error("Non-zero carry");n=d,r++}for(var p=a-n;p!==a&&0===l[p];)p++;for(var h=new Uint8Array(i+(a-p)),g=i;p!==a;)h[g++]=l[p++];return h}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,a=t.length;n!==a&&0===t[n];)n++,r++;for(var u=(a-n)*l+1>>>0,c=new Uint8Array(u);n!==a;){for(var d=t[n],f=0,p=u-1;(0!==d||f<i)&&-1!==p;p--,f++)d+=256*c[p]>>>0,c[p]=d%s>>>0,d=d/s>>>0;if(0!==d)throw Error("Non-zero carry");i=f,n++}for(var h=u-i;h!==u&&0===c[h];)h++;for(var g=o.repeat(r);h<u;++h)g+=e.charAt(c[h]);return g},decodeUnsafe:c,decode:function(e){var t=c(e);if(t)return t;throw Error("Non-base"+s+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");let ew=(0,s.X)(ev),eT=e=>ew.encode(e),eS=e=>ew.decode(e);function ej(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function ex(e){if(e.length<8192)return btoa(String.fromCharCode(...e));let t="";for(var r=0;r<e.length;r+=8192)t+=String.fromCharCode(...e.slice(r,r+8192));return btoa(t)}function eE(e){var t;let r=e.startsWith("0x")?e.slice(2):e,i=(null==(t=(r.length%2==0?r:`0${r}}`).match(/.{2}/g))?void 0:t.map(e=>parseInt(e,16)))??[];return Uint8Array.from(i)}function ek(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function eI(e){let t=[],r=0;if(0===e)return[0];for(;e>0;)t[r]=127&e,(e>>=7)&&(t[r]|=128),r+=1;return t}class eA{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32();return BigInt("0x"+(this.read32().toString(16)+e.toString(16).padStart(8,"0"))).toString(10)}read128(){let e=BigInt(this.read64());return BigInt("0x"+(BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0"))).toString(10)}read256(){let e=BigInt(this.read128());return BigInt("0x"+(BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0"))).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,{value:t,length:r}=function(e){let t=0,r=0,i=0;for(;;){let n=e[i];if(i+=1,t|=(127&n)<<r,!(128&n))break;r+=7}return{value:t,length:i}}(new Uint8Array(this.dataView.buffer,e));return this.shift(r),t}readVec(e){let t=this.readULEB(),r=[];for(let i=0;i<t;i++)r.push(e(this,i,t));return r}}function eO(e,t=["<",">"]){let[r,i]=t,n=[],a="",s=0;for(let t=0;t<e.length;t++){let o=e[t];if(o===r&&s++,o===i&&s--,0===s&&","===o){n.push(a.trim()),a="";continue}a+=o}return n.push(a.trim()),n}class e${constructor({size:e=1024,maxSize:t,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t||e,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let t=this.bytePosition+e;if(t>this.size){let e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;let r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return ez(BigInt(e),8).forEach(e=>this.write8(e)),this}write128(e){return ez(BigInt(e),16).forEach(e=>this.write8(e)),this}write256(e){return ez(BigInt(e),32).forEach(e=>this.write8(e)),this}writeULEB(e){return eI(e).forEach(e=>this.write8(e)),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach((r,i)=>t(this,r,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return function(e,t){switch(t){case"base58":return eT(e);case"base64":return ex(e);case"hex":return ek(e);default:throw Error("Unsupported encoding, supported values are: base64, hex")}}(this.toBytes(),e)}}function ez(e,t){let r=new Uint8Array(t),i=0;for(;e>0;)r[i]=Number(e%BigInt(256)),e/=BigInt(256),i+=1;return r}var eU,eB,eM,eC,eP=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},eN=(e,t,r)=>(eP(e,t,"read from private field"),r?r.call(e):t.get(e)),e_=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},eV=(e,t,r,i)=>(eP(e,t,"write to private field"),t.set(e,r),r);let eR=class{constructor(e){e_(this,eU,void 0),e_(this,eB,void 0),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),eV(this,eU,e.write),eV(this,eB,e.serialize??((e,t)=>{let r=new e$({size:this.serializedSize(e)??void 0,...t});return eN(this,eU).call(this,e,r),r.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),eN(this,eU).call(this,e,t)}serialize(e,t){return this.validate(e),new eK(this,eN(this,eB).call(this,e,t))}parse(e){let t=new eA(e);return this.read(t)}transform({name:e,input:t,output:r}){return new eR({name:e??this.name,read:e=>r(this.read(e)),write:(e,r)=>eN(this,eU).call(this,t(e),r),serializedSize:e=>this.serializedSize(t(e)),serialize:(e,r)=>eN(this,eB).call(this,t(e),r),validate:e=>this.validate(t(e))})}};eU=new WeakMap,eB=new WeakMap;let eD=Symbol.for("@mysten/serialized-bcs");function eG(e){return!!e&&"object"==typeof e&&!0===e[eD]}class eK{constructor(e,t){e_(this,eM,void 0),e_(this,eC,void 0),eV(this,eM,e),eV(this,eC,t)}get[eD](){return!0}toBytes(){return eN(this,eC)}toHex(){return ek(eN(this,eC))}toBase64(){return ex(eN(this,eC))}toBase58(){return eT(eN(this,eC))}parse(){return eN(this,eM).parse(eN(this,eC))}}function eF({size:e,...t}){return new eR({...t,serializedSize:()=>e})}function eL({readMethod:e,writeMethod:t,...r}){return eF({...r,read:t=>t[e](),write:(e,r)=>r[t](e),validate:e=>{var t;if(e<0||e>r.maxValue)throw TypeError(`Invalid ${r.name} value: ${e}. Expected value in range 0-${r.maxValue}`);null==(t=r.validate)||t.call(r,e)}})}function eW({readMethod:e,writeMethod:t,...r}){return eF({...r,read:t=>t[e](),write:(e,r)=>r[t](BigInt(e)),validate:e=>{var t;let i=BigInt(e);if(i<0||i>r.maxValue)throw TypeError(`Invalid ${r.name} value: ${i}. Expected value in range 0-${r.maxValue}`);null==(t=r.validate)||t.call(r,i)}})}eM=new WeakMap,eC=new WeakMap;let eJ={u8:e=>eL({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e}),u16:e=>eL({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e}),u32:e=>eL({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:0x100000000-1,...e}),u64:e=>eW({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e}),u128:e=>eW({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e}),u256:e=>eW({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e}),bool:e=>eF({name:"bool",size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(+!!e),...e,validate:t=>{var r;if(null==(r=null==e?void 0:e.validate)||r.call(e,t),"boolean"!=typeof t)throw TypeError(`Expected boolean, found ${typeof t}`)}}),uleb128:e=>(function({serialize:e,...t}){let r=new eR({...t,serialize:e,write:(e,t)=>{for(let i of r.serialize(e).toBytes())t.write8(i)}});return r})({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(eI(e)),...e}),bytes:(e,t)=>eF({name:`bytes[${e}]`,size:e,read:t=>t.readBytes(e),write:(t,r)=>{for(let i=0;i<e;i++)r.write8(t[i]??0)},...t,validate:r=>{var i;if(null==(i=null==t?void 0:t.validate)||i.call(t,r),!("length"in r))throw TypeError(`Expected array, found ${typeof r}`);if(r.length!==e)throw TypeError(`Expected array of length ${e}, found ${r.length}`)}}),string:e=>(function({toBytes:e,fromBytes:t,...r}){return new eR({...r,read:e=>{let r=e.readULEB();return t(e.readBytes(r))},write:(t,r)=>{let i=e(t);r.writeULEB(i.length);for(let e=0;e<i.length;e++)r.write8(i[e])},serialize:t=>{let r=e(t),i=eI(r.length),n=new Uint8Array(i.length+r.length);return n.set(i,0),n.set(r,i.length),n},validate:e=>{var t;if("string"!=typeof e)throw TypeError(`Invalid ${r.name} value: ${e}. Expected string`);null==(t=r.validate)||t.call(r,e)}})})({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...e}),fixedArray:(e,t,r)=>new eR({name:`${t.name}[${e}]`,read:r=>{let i=Array(e);for(let n=0;n<e;n++)i[n]=t.read(r);return i},write:(e,r)=>{for(let i of e)t.write(i,r)},...r,validate:t=>{var i;if(null==(i=null==r?void 0:r.validate)||i.call(r,t),!("length"in t))throw TypeError(`Expected array, found ${typeof t}`);if(t.length!==e)throw TypeError(`Expected array of length ${e}, found ${t.length}`)}}),option:e=>eJ.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"in e?e.Some:null}),vector:(e,t)=>new eR({name:`vector<${e.name}>`,read:t=>{let r=t.readULEB(),i=Array(r);for(let n=0;n<r;n++)i[n]=e.read(t);return i},write:(t,r)=>{for(let i of(r.writeULEB(t.length),t))e.write(i,r)},...t,validate:e=>{var r;if(null==(r=null==t?void 0:t.validate)||r.call(t,e),!("length"in e))throw TypeError(`Expected array, found ${typeof e}`)}}),tuple:(e,t)=>new eR({name:`(${e.map(e=>e.name).join(", ")})`,serializedSize:t=>{let r=0;for(let i=0;i<e.length;i++){let n=e[i].serializedSize(t[i]);if(null==n)return null;r+=n}return r},read:t=>{let r=[];for(let i of e)r.push(i.read(t));return r},write:(t,r)=>{for(let i=0;i<e.length;i++)e[i].write(t[i],r)},...t,validate:r=>{var i;if(null==(i=null==t?void 0:t.validate)||i.call(t,r),!Array.isArray(r))throw TypeError(`Expected array, found ${typeof r}`);if(r.length!==e.length)throw TypeError(`Expected array of length ${e.length}, found ${r.length}`)}}),struct(e,t,r){let i=Object.entries(t);return new eR({name:e,serializedSize:e=>{let t=0;for(let[r,n]of i){let i=n.serializedSize(e[r]);if(null==i)return null;t+=i}return t},read:e=>{let t={};for(let[r,n]of i)t[r]=n.read(e);return t},write:(e,t)=>{for(let[r,n]of i)n.write(e[r],t)},...r,validate:e=>{var t;if(null==(t=null==r?void 0:r.validate)||t.call(r,e),"object"!=typeof e||null==e)throw TypeError(`Expected object, found ${typeof e}`)}})},enum(e,t,r){let i=Object.entries(t);return new eR({name:e,read:e=>{let[t,r]=i[e.readULEB()];return{[t]:(null==r?void 0:r.read(e))??!0}},write:(e,t)=>{let[r,n]=Object.entries(e)[0];for(let e=0;e<i.length;e++){let[a,s]=i[e];if(a===r){t.writeULEB(e),null==s||s.write(n,t);return}}},...r,validate:e=>{var i;if(null==(i=null==r?void 0:r.validate)||i.call(r,e),"object"!=typeof e||null==e)throw TypeError(`Expected object, found ${typeof e}`);let n=Object.keys(e);if(1!==n.length)throw TypeError(`Expected object with one key, found ${n.length}`);let[a]=n;if(!Object.hasOwn(t,a))throw TypeError(`Invalid enum variant ${a}`)}})},map:(e,t)=>eJ.vector(eJ.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{let t=new Map;for(let[r,i]of e)t.set(r,i);return t}}),generic:(e,t)=>(...e)=>t(...e).transform({name:`${t.name}<${e.map(e=>e.name).join(", ")}>`,input:e=>e,output:e=>e}),lazy:e=>(function(e){let t=null;function r(){return t||(t=e()),t}return new eR({name:"lazy",read:e=>r().read(e),serializedSize:e=>r().serializedSize(e),write:(e,t)=>r().write(e,t),serialize:(e,t)=>r().serialize(e,t).toBytes()})})(e)},eq=class{constructor(e){var t;if(this.types=new Map,this.counter=0,e instanceof eq){this.schema=e.schema,this.types=new Map(e.types);return}if(this.schema=e,this.registerAddressType(eq.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);!1!==e.withPrimitives&&(t=this,t.registerType(eq.U8,function(e,t){return e.write8(t)},function(e){return e.read8()},e=>e<256),t.registerType(eq.U16,function(e,t){return e.write16(t)},function(e){return e.read16()},e=>e<65536),t.registerType(eq.U32,function(e,t){return e.write32(t)},function(e){return e.read32()},e=>e<=4294967296n),t.registerType(eq.U64,function(e,t){return e.write64(t)},function(e){return e.read64()}),t.registerType(eq.U128,function(e,t){return e.write128(t)},function(e){return e.read128()}),t.registerType(eq.U256,function(e,t){return e.write256(t)},function(e){return e.read256()}),t.registerType(eq.BOOL,function(e,t){return e.write8(t)},function(e){return"1"===e.read8().toString(10)}),t.registerType(eq.STRING,function(e,t){return e.writeVec(Array.from(t),(e,t)=>e.write8(t.charCodeAt(0)))},function(e){return e.readVec(e=>e.read8()).map(e=>String.fromCharCode(Number(e))).join("")},e=>!0),t.registerType(eq.HEX,function(e,t){return e.writeVec(Array.from(eE(t)),(e,t)=>e.write8(t))},function(e){return ek(new Uint8Array(e.readVec(e=>e.read8())))}),t.registerType(eq.BASE58,function(e,t){return e.writeVec(Array.from(eS(t)),(e,t)=>e.write8(t))},function(e){return eT(new Uint8Array(e.readVec(e=>e.read8())))}),t.registerType(eq.BASE64,function(e,t){return e.writeVec(Array.from(ej(t)),(e,t)=>e.write8(t))},function(e){return ex(new Uint8Array(e.readVec(e=>e.read8())))}))}tempKey(){return`bcs-struct-${++this.counter}`}ser(e,t,r){if("string"==typeof e||Array.isArray(e)){let{name:i,params:n}=this.parseTypeName(e);return this.getTypeInterface(i).encode(this,t,r,n)}if("object"==typeof e){let i=this.tempKey();return new eq(this).registerStructType(i,e).ser(i,t,r)}throw Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(e)}`)}de(e,t,r){if("string"==typeof t){if(r)t=function(e,t){switch(t){case"base58":return eS(e);case"base64":return ej(e);case"hex":return eE(e);default:throw Error("Unsupported encoding, supported values are: base64, hex")}}(t,r);else throw Error("To pass a string to `bcs.de`, specify encoding")}if("string"==typeof e||Array.isArray(e)){let{name:r,params:i}=this.parseTypeName(e);return this.getTypeInterface(r).decode(this,t,i)}if("object"==typeof e){let i=new eq(this),n=this.tempKey();return i.registerStructType(n,e).de(n,t,r)}throw Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,r,i=()=>!0){let{name:n,params:a}=this.parseTypeName(e);return this.types.set(n,{encode(e,t,r,i){let n=a.reduce((e,t,r)=>Object.assign(e,{[t]:i[r]}),{});return this._encodeRaw.call(e,new e$(r),t,i,n)},decode(e,t,r){let i=a.reduce((e,t,i)=>Object.assign(e,{[t]:r[i]}),{});return this._decodeRaw.call(e,new eA(t),r,i)},_encodeRaw(e,r,a,s){if(i(r))return t.call(this,e,r,a,s);throw Error(`Validation failed for type ${n}, data: ${r}`)},_decodeRaw(e,t,i){return r.call(this,e,t,i)}}),this}registerBcsType(e,t){return this.registerType(e,(e,r,i)=>(t(...i.map(e=>new eR({name:String(e),write:(t,r)=>{let{name:n,params:a}=this.parseTypeName(e),s=this.getTypeInterface(n),o=a.reduce((e,t,r)=>Object.assign(e,{[t]:i[r]}),{});return s._encodeRaw.call(this,r,t,a,o)},read:()=>{throw Error("Not implemented")}}))).write(r,e),e),(e,r)=>t(...r.map(e=>new eR({name:String(e),write:(e,t)=>{throw Error("Not implemented")},read:t=>{let{name:i,params:n}=this.parseTypeName(e),a=this.getTypeInterface(i),s=n.reduce((e,t,i)=>Object.assign(e,{[t]:r[i]}),{});return a._decodeRaw.call(this,t,n,s)}}))).read(e)),this}registerAddressType(e,t,r="hex"){switch(r){case"base64":return this.registerType(e,function(e,t){return ej(t).reduce((e,t)=>e.write8(t),e)},function(e){return ex(e.readBytes(t))});case"hex":return this.registerType(e,function(e,t){return eE(t).reduce((e,t)=>e.write8(t),e)},function(e){return ek(e.readBytes(t))});default:throw Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:r}=this.parseTypeName(e);if(r.length>1)throw Error("Vector can have only one type parameter; got "+t);return this.registerType(e,function(t,r,i,n){return t.writeVec(r,(t,r)=>{let a=i[0];if(!a)throw Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:s,params:o}=this.parseTypeName(a);if(this.hasType(s))return this.getTypeInterface(s)._encodeRaw.call(this,t,r,o,n);if(!(s in n))throw Error(`Unable to find a matching type definition for ${s} in vector; make sure you passed a generic`);let{name:u,params:l}=this.parseTypeName(n[s]);return this.getTypeInterface(u)._encodeRaw.call(this,t,r,l,n)})},function(t,r,i){return t.readVec(t=>{let n=r[0];if(!n)throw Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:a,params:s}=this.parseTypeName(n);if(this.hasType(a))return this.getTypeInterface(a)._decodeRaw.call(this,t,s,i);if(!(a in i))throw Error(`Unable to find a matching type definition for ${a} in vector; make sure you passed a generic`);let{name:o,params:u}=this.parseTypeName(i[a]);return this.getTypeInterface(o)._decodeRaw.call(this,t,u,i)})})}registerStructType(e,t){for(let e in t){let r=this.tempKey(),i=t[e];Array.isArray(i)||"string"==typeof i||(t[e]=r,this.registerStructType(r,i))}let r=Object.freeze(t),i=Object.keys(r),{name:n,params:a}=this.parseTypeName(e);return this.registerType(e,function(e,t,s,o){if(!t||t.constructor!==Object)throw Error(`Expected ${n} to be an Object, got: ${t}`);if(s.length!==a.length)throw Error(`Incorrect number of generic parameters passed; expected: ${a.length}, got: ${s.length}`);for(let u of i){if(!(u in t))throw Error(`Struct ${n} requires field ${u}:${r[u]}`);let{name:i,params:l}=this.parseTypeName(r[u]);if(a.includes(i)){let r=a.indexOf(i),{name:l,params:c}=this.parseTypeName(s[r]);if(this.hasType(l)){this.getTypeInterface(l)._encodeRaw.call(this,e,t[u],c,o);continue}if(!(l in o))throw Error(`Unable to find a matching type definition for ${l} in ${n}; make sure you passed a generic`);let{name:d,params:f}=this.parseTypeName(o[l]);this.getTypeInterface(d)._encodeRaw.call(this,e,t[u],f,o)}else this.getTypeInterface(i)._encodeRaw.call(this,e,t[u],l,o)}return e},function(e,t,s){if(t.length!==a.length)throw Error(`Incorrect number of generic parameters passed; expected: ${a.length}, got: ${t.length}`);let o={};for(let u of i){let{name:i,params:l}=this.parseTypeName(r[u]);if(a.includes(i)){let r=a.indexOf(i),{name:l,params:c}=this.parseTypeName(t[r]);if(this.hasType(l)){o[u]=this.getTypeInterface(l)._decodeRaw.call(this,e,c,s);continue}if(!(l in s))throw Error(`Unable to find a matching type definition for ${l} in ${n}; make sure you passed a generic`);let{name:d,params:f}=this.parseTypeName(s[l]);o[u]=this.getTypeInterface(d)._decodeRaw.call(this,e,f,s)}else o[u]=this.getTypeInterface(i)._decodeRaw.call(this,e,l,s)}return o})}registerEnumType(e,t){for(let e in t){let r=this.tempKey(),i=t[e];null===i||Array.isArray(i)||"string"==typeof i||(t[e]=r,this.registerStructType(r,i))}let r=Object.freeze(t),i=Object.keys(r),{name:n,params:a}=this.parseTypeName(e);return this.registerType(e,function(e,t,s,o){if(!t)throw Error(`Unable to write enum "${n}", missing data.
Received: "${t}"`);if("object"!=typeof t)throw Error(`Incorrect data passed into enum "${n}", expected object with properties: "${i.join(" | ")}".
Received: "${JSON.stringify(t)}"`);let u=Object.keys(t)[0];if(void 0===u)throw Error(`Empty object passed as invariant of the enum "${n}"`);let l=i.indexOf(u);if(-1===l)throw Error(`Unknown invariant of the enum "${n}", allowed values: "${i.join(" | ")}"; received "${u}"`);let c=r[i[l]];if(e.write8(l),null===c)return e;let d=a.indexOf(c),f=-1===d?c:s[d];{let{name:r,params:i}=this.parseTypeName(f);return this.getTypeInterface(r)._encodeRaw.call(this,e,t[u],i,o)}},function(e,t,s){let o=e.readULEB(),u=i[o],l=r[u];if(-1===o)throw Error(`Decoding type mismatch, expected enum "${n}" invariant index, received "${o}"`);if(null===l)return{[u]:!0};let c=a.indexOf(l),d=-1===c?l:t[c];{let{name:t,params:r}=this.parseTypeName(d);return{[u]:this.getTypeInterface(t)._decodeRaw.call(this,e,r,s)}}})}getTypeInterface(e){let t=this.types.get(e);if("string"==typeof t){let e=[];for(;"string"==typeof t;){if(e.includes(t))throw Error(`Recursive definition found: ${e.join(" -> ")} -> ${t}`);e.push(t),t=this.types.get(t)}}if(void 0===t)throw Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[t,...r]=e;return{name:t,params:r}}if("string"!=typeof e)throw Error(`Illegal type passed as a name of the type: ${e}`);let[t,r]=this.schema.genericSeparators||["<",">"],i=e.indexOf(t),n=Array.from(e).reverse().indexOf(r);if(-1===i&&-1===n)return{name:e,params:[]};if(-1===i||-1===n)throw Error(`Unclosed generic in name '${e}'`);return{name:e.slice(0,i),params:eO(e.slice(i+1,e.length-n-1),this.schema.genericSeparators)}}};function eX(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(64,"0")}`}function eH(e,t=!1){return eX(e,t)}eq.U8="u8",eq.U16="u16",eq.U32="u32",eq.U64="u64",eq.U128="u128",eq.U256="u256",eq.BOOL="bool",eq.VECTOR="vector",eq.ADDRESS="address",eq.STRING="string",eq.HEX="hex-string",eq.BASE58="base58-string",eq.BASE64="base64-string",BigInt(1e9),eH("0x6");eH("0x5");let eZ={address:"0x2",module:"object",name:"ID"},eQ={address:"0x1",module:"ascii",name:"String"},eY={address:"0x1",module:"string",name:"String"},e0={address:"0x1",module:"option",name:"Option"},e1=(e,t)=>e.address===t.address&&e.module===t.module&&e.name===t.name;function e2(e,t){if(!(typeof t>"u")&&typeof t!==e)throw Error(`Expect ${t} to be ${e}, received ${typeof t}`)}let e6=["Address","Bool","U8","U16","U32","U64","U128","U256"],e8=/^vector<(.+)>$/,e4=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class e5{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};let r=e.match(e8);if(r)return{vector:e5.parseFromStr(r[1],t)};let i=e.match(e4);if(i)return{struct:{address:t?eX(i[1]):i[1],module:i[2],name:i[3],typeParams:void 0===i[5]?[]:e5.parseStructTypeArgs(i[5],t)}};throw Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return eO(e).map(e=>e5.parseFromStr(e,t))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${e5.tagToString(e.vector)}>`;if("struct"in e){let t=e.struct,r=t.typeParams.map(e5.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw Error("Invalid TypeTag")}}let e3=new eq({genericSeparators:["<",">"],vectorType:"vector",addressLength:32,addressEncoding:"hex",types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function e9(e){return eJ.u64({name:"unsafe_u64",...e}).transform({input:e=>e,output:e=>Number(e)})}function e7(e){return e.transform({input:e=>({[e.kind]:e}),output:e=>{let t=Object.keys(e)[0];return{kind:t,...e[t]}}})}let te=eJ.bytes(32).transform({input:e=>"string"==typeof e?eE(eX(e)):e,output:e=>eX(ek(e))}),tt=eJ.vector(eJ.u8()).transform({name:"ObjectDigest",input:e=>eS(e),output:e=>eT(new Uint8Array(e))}),tr=eJ.struct("SuiObjectRef",{objectId:te,version:eJ.u64(),digest:tt}),ti=eJ.struct("SharedObjectRef",{objectId:te,initialSharedVersion:eJ.u64(),mutable:eJ.bool()}),tn=eJ.enum("ObjectArg",{ImmOrOwned:tr,Shared:ti,Receiving:tr}),ta=eJ.enum("CallArg",{Pure:eJ.vector(eJ.u8()),Object:tn,ObjVec:eJ.vector(tn)}),ts=eJ.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:eJ.lazy(()=>ts),struct:eJ.lazy(()=>tp),u16:null,u32:null,u256:null}),to=e7(eJ.enum("Argument",{GasCoin:null,Input:eJ.struct("Input",{index:eJ.u16()}),Result:eJ.struct("Result",{index:eJ.u16()}),NestedResult:eJ.struct("NestedResult",{index:eJ.u16(),resultIndex:eJ.u16()})})),tu=eJ.struct("ProgrammableMoveCall",{package:te,module:eJ.string(),function:eJ.string(),type_arguments:eJ.vector(ts),arguments:eJ.vector(to)}).transform({input:e=>{let[t,r,i]=e.target.split("::"),n=e.typeArguments.map(e=>e5.parseFromStr(e,!0));return{package:eX(t),module:r,function:i,type_arguments:n,arguments:e.arguments}},output:e=>({target:[e.package,e.module,e.function].join("::"),arguments:e.arguments,typeArguments:e.type_arguments.map(e5.tagToString)})}),tl=e7(eJ.enum("Transaction",{MoveCall:tu,TransferObjects:eJ.struct("TransferObjects",{objects:eJ.vector(to),address:to}),SplitCoins:eJ.struct("SplitCoins",{coin:to,amounts:eJ.vector(to)}),MergeCoins:eJ.struct("MergeCoins",{destination:to,sources:eJ.vector(to)}),Publish:eJ.struct("Publish",{modules:eJ.vector(eJ.vector(eJ.u8())),dependencies:eJ.vector(te)}),MakeMoveVec:eJ.struct("MakeMoveVec",{type:eJ.enum("Option",{None:null,Some:ts}),objects:eJ.vector(to)}),Upgrade:eJ.struct("Upgrade",{modules:eJ.vector(eJ.vector(eJ.u8())),dependencies:eJ.vector(te),packageId:te,ticket:to})})),tc=eJ.struct("ProgrammableTransaction",{inputs:eJ.vector(ta),transactions:eJ.vector(tl)}),td=eJ.enum("TransactionKind",{ProgrammableTransaction:tc,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),tf=eJ.enum("TransactionExpiration",{None:null,Epoch:e9()}),tp=eJ.struct("StructTag",{address:te,module:eJ.string(),name:eJ.string(),typeParams:eJ.vector(ts)}),th=eJ.struct("GasData",{payment:eJ.vector(tr),owner:te,price:eJ.u64(),budget:eJ.u64()}),tg=eJ.struct("TransactionDataV1",{kind:td,sender:te,gasData:th,expiration:tf}),tm=eJ.enum("TransactionData",{V1:tg}),ty=eJ.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),tb=eJ.enum("IntentVersion",{V0:null}),tv=eJ.enum("AppId",{Sui:null}),tw=eJ.struct("Intent",{scope:ty,version:tb,appId:tv}),tT=eJ.generic(["T"],e=>eJ.struct("IntentMessage<T>",{intent:tw,value:e})),tS=eJ.enum("CompressedSignature",{ED25519:eJ.fixedArray(64,eJ.u8()),Secp256k1:eJ.fixedArray(64,eJ.u8()),Secp256r1:eJ.fixedArray(64,eJ.u8()),ZkLogin:eJ.vector(eJ.u8())}),tj=eJ.enum("PublicKey",{ED25519:eJ.fixedArray(32,eJ.u8()),Secp256k1:eJ.fixedArray(33,eJ.u8()),Secp256r1:eJ.fixedArray(33,eJ.u8()),ZkLogin:eJ.vector(eJ.u8())}),tx=eJ.struct("MultiSigPkMap",{pubKey:tj,weight:eJ.u8()}),tE=eJ.struct("MultiSigPublicKey",{pk_map:eJ.vector(tx),threshold:eJ.u16()}),tk=eJ.struct("MultiSig",{sigs:eJ.vector(tS),bitmap:eJ.u16(),multisig_pk:tE}),tI=eJ.vector(eJ.u8()).transform({input:e=>"string"==typeof e?ej(e):e,output:e=>ex(new Uint8Array(e))}),tA=eJ.struct("SenderSignedTransaction",{intentMessage:tT(tm),txSignatures:eJ.vector(tI)}),tO=eJ.vector(tA,{name:"SenderSignedData"}),t$={...eJ,U8:eJ.u8(),U16:eJ.u16(),U32:eJ.u32(),U64:eJ.u64(),U128:eJ.u128(),U256:eJ.u256(),ULEB128:eJ.uleb128(),Bool:eJ.bool(),String:eJ.string(),Address:te,Argument:to,CallArg:ta,CompressedSignature:tS,GasData:th,MultiSig:tk,MultiSigPkMap:tx,MultiSigPublicKey:tE,ObjectArg:tn,ObjectDigest:tt,ProgrammableMoveCall:tu,ProgrammableTransaction:tc,PublicKey:tj,SenderSignedData:tO,SenderSignedTransaction:tA,SharedObjectRef:ti,StructTag:tp,SuiObjectRef:tr,Transaction:tl,TransactionData:tm,TransactionDataV1:tg,TransactionExpiration:tf,TransactionKind:td,TypeTag:ts,ser:e3.ser.bind(e3),de:e3.de.bind(e3),getTypeInterface:e3.getTypeInterface.bind(e3),hasType:e3.hasType.bind(e3),parseTypeName:e3.parseTypeName.bind(e3),registerAddressType:e3.registerAddressType.bind(e3),registerAlias:e3.registerAlias.bind(e3),registerBcsType:e3.registerBcsType.bind(e3),registerEnumType:e3.registerEnumType.bind(e3),registerStructType:e3.registerStructType.bind(e3),registerType:e3.registerType.bind(e3),types:e3.types};e3.registerBcsType("utf8string",()=>eJ.string({name:"utf8string"})),e3.registerBcsType("unsafe_u64",()=>e9()),e3.registerBcsType("enumKind",e=>e7(e)),[te,to,ta,tS,th,tk,tx,tE,tn,tt,tu,tc,tj,tO,ti,tp,tr,tl,tm,tg,tf,td,ts].forEach(e=>{e3.registerBcsType(e.name,()=>e)});let tz=_([B({ImmOrOwned:G}),B({Shared:B({objectId:P(),initialSharedVersion:_([A(),P()]),mutable:I()})}),B({Receiving:G})]),tU=B({Pure:k(A())}),tB=B({Object:tz}),tM=_([tU,tB]),tC={Pure:function(e,t){return{Pure:Array.from(e instanceof Uint8Array?e:eG(e)?e.toBytes():t$.ser(t,e,{maxSize:1/0}).toBytes())}},ObjectRef:({objectId:e,digest:t,version:r})=>({Object:{ImmOrOwned:{digest:t,version:r,objectId:eX(e)}}}),SharedObjectRef:({objectId:e,mutable:t,initialSharedVersion:r})=>({Object:{Shared:{mutable:t,initialSharedVersion:r,objectId:eX(e)}}}),ReceivingRef:({objectId:e,digest:t,version:r})=>({Object:{Receiving:{digest:t,version:r,objectId:eX(e)}}})};function tP(e){return"string"==typeof e?eX(e):"ImmOrOwned"in e.Object?eX(e.Object.ImmOrOwned.objectId):"Receiving"in e.Object?eX(e.Object.Receiving.objectId):eX(e.Object.Shared.objectId)}let tN=_([B({kind:O("Input"),index:A(),value:M(E()),type:M(O("object"))}),B({kind:O("Input"),index:A(),value:M(E()),type:O("pure")})]),t_=_([tN,B({kind:O("GasCoin")}),B({kind:O("Result"),index:A()}),B({kind:O("NestedResult"),index:A(),resultIndex:A()})]),tV=B({kind:O("MoveCall"),target:x("target",P().validator),typeArguments:k(P()),arguments:k(t_)}),tR=B({kind:O("TransferObjects"),objects:k(t_),address:t_}),tD=B({kind:O("SplitCoins"),coin:t_,amounts:k(t_)}),tG=B({kind:O("MergeCoins"),destination:t_,sources:k(t_)}),tK=B({kind:O("MakeMoveVec"),type:M((n=C(P(),V()),_([B({None:_([O(!0),O(null)])}),B({Some:n})]))),objects:k(t_)}),tF=B({kind:O("Publish"),modules:k(k(A())),dependencies:k(P())}),tL=B({kind:O("Upgrade"),modules:k(k(A())),dependencies:k(P()),packageId:P(),ticket:t_}),tW=_([tV,tR,tD,tG,tF,tL,tK]),tJ=e=>v({kind:"MoveCall",target:e.target,arguments:e.arguments??[],typeArguments:e.typeArguments??[]},tV),tq=(e,t)=>("Input"===t.kind&&"pure"===t.type&&"object"!=typeof t.value&&(t.value=tC.Pure(t$.Address.serialize(t.value))),v({kind:"TransferObjects",objects:e,address:t},tR)),tX=(e,t)=>(t.forEach(e=>{"Input"===e.kind&&"pure"===e.type&&"object"!=typeof e.value&&(e.value=tC.Pure(t$.U64.serialize(e.value)))}),v({kind:"SplitCoins",coin:e,amounts:t},tD)),tH=(e,t)=>v({kind:"MergeCoins",destination:e,sources:t},tG),tZ=({modules:e,dependencies:t})=>v({kind:"Publish",modules:e.map(e=>"string"==typeof e?Array.from(ej(e)):e),dependencies:t.map(e=>eH(e))},tF),tQ=({modules:e,dependencies:t,packageId:r,ticket:i})=>v({kind:"Upgrade",modules:e.map(e=>"string"==typeof e?Array.from(ej(e)):e),dependencies:t.map(e=>eH(e)),packageId:r,ticket:i},tL),tY=({type:e,objects:t})=>v({kind:"MakeMoveVec",type:e?{Some:e5.parseFromStr(e)}:{None:null},objects:t},tK),t0=M(z(_([B({Epoch:A()}),B({None:_([O(!0),O(null)])})]))),t1=x("StringEncodedBigint",e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}),t2=B({budget:M(t1),price:M(t1),payment:M(k(G)),owner:M(P())}),t6=B({version:O(1),sender:M(P()),expiration:t0,gasConfig:t2,inputs:k(tN),transactions:k(tW)});function t8(e){return eX(e).replace("0x","")}class t4{constructor(e){this.version=1,this.sender=null==e?void 0:e.sender,this.expiration=null==e?void 0:e.expiration,this.gasConfig=(null==e?void 0:e.gasConfig)??{},this.inputs=(null==e?void 0:e.inputs)??[],this.transactions=(null==e?void 0:e.transactions)??[]}static fromKindBytes(e){var t;let r=t$.TransactionKind.parse(e),i="ProgrammableTransaction"in r?r.ProgrammableTransaction:null;if(!i)throw Error("Unable to deserialize from bytes.");let n=(t={version:1,gasConfig:{},inputs:i.inputs.map((e,t)=>v({kind:"Input",value:e,index:t,type:T(e,tU)?"pure":"object"},tN)),transactions:i.transactions},v(t,t6));return t4.restore(n)}static fromBytes(e){var t,r;let i=t$.TransactionData.parse(e),n=null==i?void 0:i.V1,a="ProgrammableTransaction"in n.kind?null==(t=null==n?void 0:n.kind)?void 0:t.ProgrammableTransaction:null;if(!n||!a)throw Error("Unable to deserialize from bytes.");let s=(r={version:1,sender:n.sender,expiration:n.expiration,gasConfig:n.gasData,inputs:a.inputs.map((e,t)=>v({kind:"Input",value:e,index:t,type:T(e,tU)?"pure":"object"},tN)),transactions:a.transactions},v(r,t6));return t4.restore(s)}static restore(e){b(e,t6);let t=new t4;return Object.assign(t,e),t}static getDigestFromBytes(e){return eT(function(e,t){let r=Array.from(`${e}::`).map(e=>e.charCodeAt(0)),i=new Uint8Array(r.length+t.length);return i.set(r),i.set(t,r.length),(0,s.y)(i,{dkLen:32})}("TransactionData",e))}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:r}={}){let i=this.inputs.map(e=>(b(e.value,tM),e.value)),n={ProgrammableTransaction:{inputs:i,transactions:this.transactions}};if(r)return t$.TransactionKind.serialize(n,{maxSize:e}).toBytes();let a=(null==t?void 0:t.expiration)??this.expiration,s=(null==t?void 0:t.sender)??this.sender,o={...this.gasConfig,...null==t?void 0:t.gasConfig};if(!s)throw Error("Missing transaction sender");if(!o.budget)throw Error("Missing gas budget");if(!o.payment)throw Error("Missing gas payment");if(!o.price)throw Error("Missing gas price");let u={sender:t8(s),expiration:a||{None:!0},gasData:{payment:o.payment,owner:t8(this.gasConfig.owner??s),price:BigInt(o.price),budget:BigInt(o.budget)},kind:{ProgrammableTransaction:{inputs:i,transactions:this.transactions}}};return t$.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}getDigest(){let e=this.build({onlyTransactionKind:!1});return t4.getDigestFromBytes(e)}snapshot(){return v(this,t6)}}var t5,t3,t9,t7,re,rt,rr,ri,rn,ra,rs,ro,ru,rl,rc,rd,rf,rp=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},rh=(e,t,r)=>(rp(e,t,"read from private field"),r?r.call(e):t.get(e)),rg=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},rm=(e,t,r,i)=>(rp(e,t,"write to private field"),t.set(e,r),r),ry=(e,t,r)=>(rp(e,t,"access private method"),r);let rb={maxPureArgumentSize:16384,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:131072};function rv(e){if(!e.client)throw Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}let rw=Symbol.for("@mysten/transaction"),rT={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},rS=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(r,i)=>e.slice(i*t,i*t+t)),rj=class{constructor(e){rg(this,t3),rg(this,t7),rg(this,rt),rg(this,ri),rg(this,ra),rg(this,ro),rg(this,rl),rg(this,rd),rg(this,t5,void 0),rm(this,t5,new t4(e?e.blockData:void 0))}static fromKind(e){let t=new rj;return rm(t,t5,t4.fromKindBytes("string"==typeof e?ej(e):e)),t}static from(e){let t=new rj;return"string"==typeof e&&e.startsWith("{")?rm(t,t5,t4.restore(JSON.parse(e))):rm(t,t5,t4.fromBytes("string"==typeof e?ej(e):e)),t}setSender(e){rh(this,t5).sender=e}setSenderIfNotSet(e){rh(this,t5).sender||(rh(this,t5).sender=e)}setExpiration(e){rh(this,t5).expiration=e}setGasPrice(e){rh(this,t5).gasConfig.price=String(e)}setGasBudget(e){rh(this,t5).gasConfig.budget=String(e)}setGasOwner(e){rh(this,t5).gasConfig.owner=e}setGasPayment(e){rh(this,t5).gasConfig.payment=e.map(e=>w(e,G))}get blockData(){return rh(this,t5).snapshot()}get[rw](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:function(e){function t(t,r){return e(t,r)}return t.u8=t=>e(t$.U8.serialize(t)),t.u16=t=>e(t$.U16.serialize(t)),t.u32=t=>e(t$.U32.serialize(t)),t.u64=t=>e(t$.U64.serialize(t)),t.u128=t=>e(t$.U128.serialize(t)),t.u256=t=>e(t$.U256.serialize(t)),t.bool=t=>e(t$.Bool.serialize(t)),t.string=t=>e(t$.String.serialize(t)),t.address=t=>e(t$.Address.serialize(t)),t.id=t.address,t}((e,t)=>eG(e)?ry(this,t3,t9).call(this,"pure",{Pure:Array.from(e.toBytes())}):ry(this,t3,t9).call(this,"pure",e instanceof Uint8Array?tC.Pure(e):t?tC.Pure(e,t):e))}),this.pure}get gas(){return{kind:"GasCoin"}}object(e){if("object"==typeof e&&"kind"in e)return e;let t=tP(e),r=rh(this,t5).inputs.find(e=>"object"===e.type&&t===tP(e.value));return r&&T(r.value,tB)&&"Shared"in r.value.Object&&T(e,tB)&&"Shared"in e.Object&&(r.value.Object.Shared.mutable=r.value.Object.Shared.mutable||e.Object.Shared.mutable),r??ry(this,t3,t9).call(this,"object","string"==typeof e?eX(e):e)}objectRef(...e){return this.object(tC.ObjectRef(...e))}receivingRef(...e){return this.object(tC.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(tC.SharedObjectRef(...e))}add(e){return function(e){let t=[],r=r=>t[r]??(t[r]={kind:"NestedResult",index:e,resultIndex:r});return new Proxy({kind:"Result",index:e},{set(){throw Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,t){if(t in e)return Reflect.get(e,t);if(t===Symbol.iterator)return function*(){let e=0;for(;;)yield r(e),e++};if("symbol"==typeof t)return;let i=parseInt(t,10);if(!(Number.isNaN(i)||i<0))return r(i)}})}(rh(this,t5).transactions.push(e)-1)}splitCoins(e,t){return this.add(tX("string"==typeof e?this.object(e):e,t.map(e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):ry(this,t7,re).call(this,e))))}mergeCoins(e,t){return this.add(tH("string"==typeof e?this.object(e):e,t.map(e=>"string"==typeof e?this.object(e):e)))}publish({modules:e,dependencies:t}){return this.add(tZ({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,packageId:r,ticket:i}){return this.add(tQ({modules:e,dependencies:t,packageId:r,ticket:"string"==typeof i?this.object(i):i}))}moveCall({arguments:e,typeArguments:t,target:r}){return this.add(tJ({arguments:null==e?void 0:e.map(e=>ry(this,t7,re).call(this,e)),typeArguments:t,target:r}))}transferObjects(e,t){return this.add(tq(e.map(e=>"string"==typeof e?this.object(e):e),"string"==typeof t?this.pure.address(t):ry(this,t7,re).call(this,t)))}makeMoveVec({type:e,objects:t}){return this.add(tY({type:e,objects:t.map(e=>"string"==typeof e?this.object(e):e)}))}serialize(){return JSON.stringify(rh(this,t5).snapshot())}async sign(e){let{signer:t,...r}=e,i=await this.build(r);return t.signTransactionBlock(i)}async build(e={}){return await ry(this,rd,rf).call(this,e),rh(this,t5).build({maxSizeBytes:ry(this,rt,rr).call(this,"maxTxSizeBytes",e),onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await ry(this,rd,rf).call(this,e),rh(this,t5).getDigest()}};t5=new WeakMap,t3=new WeakSet,t9=function(e,t){let r=rh(this,t5).inputs.length,i=v({kind:"Input",value:"bigint"==typeof t?String(t):t,index:r,type:e},tN);return rh(this,t5).inputs.push(i),i},t7=new WeakSet,re=function(e){return eG(e)?this.pure(e):e},rt=new WeakSet,rr=function(e,{protocolConfig:t,limits:r}){if(r&&"number"==typeof r[e])return r[e];if(!t)return rb[e];let i=null==t?void 0:t.attributes[rT[e]];if(!i)throw Error(`Missing expected protocol config: "${rT[e]}"`);let n="u64"in i?i.u64:"u32"in i?i.u32:i.f64;if(!n)throw Error(`Unexpected protocol config value found for: "${rT[e]}"`);return Number(n)},ri=new WeakSet,rn=function(e){let t=ry(this,rt,rr).call(this,"maxPureArgumentSize",e);rh(this,t5).inputs.forEach((e,r)=>{if(T(e.value,tU)&&e.value.Pure.length>t)throw Error(`Input at index ${r} is too large, max pure input size is ${t} bytes, got ${e.value.Pure.length} bytes`)})},ra=new WeakSet,rs=async function(e){if(rh(this,t5).gasConfig.payment){let t=ry(this,rt,rr).call(this,"maxGasObjects",e);if(rh(this,t5).gasConfig.payment.length>t)throw Error(`Payment objects exceed maximum amount: ${t}`)}if(e.onlyTransactionKind||rh(this,t5).gasConfig.payment)return;let t=rh(this,t5).gasConfig.owner??rh(this,t5).sender,r=(await rv(e).getCoins({owner:t,coinType:"0x2::sui::SUI"})).data.filter(e=>!rh(this,t5).inputs.find(t=>!!T(t.value,tM)&&"Object"in t.value&&"ImmOrOwned"in t.value.Object&&e.coinObjectId===t.value.Object.ImmOrOwned.objectId)).slice(0,ry(this,rt,rr).call(this,"maxGasObjects",e)-1).map(e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version}));if(!r.length)throw Error("No valid gas coins found for the transaction.");this.setGasPayment(r)},ro=new WeakSet,ru=async function(e){e.onlyTransactionKind||rh(this,t5).gasConfig.price||this.setGasPrice(await rv(e).getReferenceGasPrice())},rl=new WeakSet,rc=async function(e){let{inputs:t,transactions:r}=rh(this,t5),i=[],n=[];if(t.forEach(e=>{if("object"===e.type&&"string"==typeof e.value){n.push({id:eX(e.value),input:e});return}}),r.forEach(e=>{if("MoveCall"===e.kind&&e.arguments.some(e=>"Input"===e.kind&&!T(t[e.index].value,tM))&&i.push(e),"SplitCoins"===e.kind&&e.amounts.forEach(e=>{if("Input"===e.kind){let r=t[e.index];"object"!=typeof r.value&&(r.value=tC.Pure(t$.U64.serialize(r.value)))}}),"TransferObjects"===e.kind&&"Input"===e.address.kind){let r=t[e.address.index];"object"!=typeof r.value&&(r.value=tC.Pure(t$.Address.serialize(r.value)))}}),i.length&&await Promise.all(i.map(async r=>{let[i,a,s]=r.target.split("::"),o=await rv(e).getNormalizedMoveFunction({package:eH(i),module:a,function:s}),u=o.parameters.length>0&&function(e){var t;let r=null==(t=eb(e))?void 0:t.Struct;return(null==r?void 0:r.address)==="0x2"&&(null==r?void 0:r.module)==="tx_context"&&(null==r?void 0:r.name)==="TxContext"}(o.parameters.at(-1))?o.parameters.slice(0,o.parameters.length-1):o.parameters;if(u.length!==r.arguments.length)throw Error("Incorrect number of arguments.");u.forEach((e,i)=>{let a=r.arguments[i];if("Input"!==a.kind)return;let s=t[a.index];if(T(s.value,tM))return;let o=s.value,u=function e(t,r){if("string"==typeof t&&e6.includes(t)){if(t in["U8","U16","U32","U64","U128","U256"])e2("number",r);else if("Bool"===t)e2("boolean",r);else{var i,n;if("Address"===t&&(e2("string",r),r&&(i=r,!/^(0x|0X)?[a-fA-F0-9]+$/.test(i)||i.length%2!=0||32!=(n=r,/^(0x|0X)/.test(n)?(n.length-2)/2:n.length/2))))throw Error("Invalid Sui Address")}return t.toLowerCase()}if("string"==typeof t)throw Error(`Unknown pure normalized type ${JSON.stringify(t,null,2)}`);if("Vector"in t){if((void 0===r||"string"==typeof r)&&"U8"===t.Vector)return"string";if(void 0!==r&&!Array.isArray(r))throw Error(`Expect ${r} to be a array, received ${typeof r}`);let i=e(t.Vector,r?r[0]:void 0);return void 0===i?void 0:`vector<${i}>`}if("Struct"in t){if(e1(t.Struct,eQ))return"string";if(e1(t.Struct,eY))return"utf8string";if(e1(t.Struct,eZ))return"address";if(e1(t.Struct,e0))return e({Vector:t.Struct.typeArguments[0]},r)}}(e,o);if(u){s.value=tC.Pure(o,u);return}if(null!=eb(e)||"object"==typeof e&&"TypeParameter"in e){if("string"!=typeof o)throw Error(`Expect the argument to be an object id string, got ${JSON.stringify(o,null,2)}`);n.push({id:o,input:s,normalizedType:e});return}throw Error(`Unknown call arg type ${JSON.stringify(e,null,2)} for value ${JSON.stringify(o,null,2)}`)})})),n.length){let t=[...new Set(n.map(({id:e})=>e))],r=rS(t,50),i=(await Promise.all(r.map(t=>rv(e).multiGetObjects({ids:t,options:{showOwner:!0}})))).flat(),a=new Map(t.map((e,t)=>[e,i[t]])),s=Array.from(a).filter(([e,t])=>t.error).map(([e,t])=>e);if(s.length)throw Error(`The following input objects are invalid: ${s.join(", ")}`);n.forEach(({id:e,input:t,normalizedType:r})=>{var i,n,s;let o=a.get(e),u=null==(i=o.data)?void 0:i.owner,l=u&&"object"==typeof u&&"Shared"in u?u.Shared.initial_shared_version:void 0;if(l){let i=null!=r&&null==em(r)&&null==ey(r),a=((null==(n="object"==typeof(s=t.value)&&"Object"in s&&"Shared"in s.Object?s.Object.Shared:void 0)?void 0:n.mutable)??!1)||i||null!=r&&null!=em(r);t.value=tC.SharedObjectRef({objectId:e,initialSharedVersion:l,mutable:a})}else r&&function(e){let t=eb(e);return!!t&&"0x2"===t.Struct.address&&"transfer"===t.Struct.module&&"Receiving"===t.Struct.name}(r)?t.value=tC.ReceivingRef(er(o)):t.value=tC.ObjectRef(er(o))})}},rd=new WeakSet,rf=async function(e){if(!e.onlyTransactionKind&&!rh(this,t5).sender)throw Error("Missing transaction sender");if(e.protocolConfig||e.limits||!e.client||(e.protocolConfig=await e.client.getProtocolConfig()),await Promise.all([ry(this,ro,ru).call(this,e),ry(this,rl,rc).call(this,e)]),!e.onlyTransactionKind&&(await ry(this,ra,rs).call(this,e),!rh(this,t5).gasConfig.budget)){let t=await rv(e).dryRunTransactionBlock({transactionBlock:rh(this,t5).build({maxSizeBytes:ry(this,rt,rr).call(this,"maxTxSizeBytes",e),overrides:{gasConfig:{budget:String(ry(this,rt,rr).call(this,"maxTxGas",e)),payment:[]}}})});if("success"!==t.effects.status.status)throw Error(`Dry run failed, could not automatically determine a budget: ${t.effects.status.error}`,{cause:t});let r=1000n*BigInt(this.blockData.gasConfig.price||1n),i=BigInt(t.effects.gasUsed.computationCost)+r,n=i+BigInt(t.effects.gasUsed.storageCost)-BigInt(t.effects.gasUsed.storageRebate);this.setGasBudget(n>i?n:i)}ry(this,ri,rn).call(this,e)};let rx=(0,s.cj)([["Testnet",{tokenMessengerState:"0x5252abd1137094ed1db3e0d75bc36abcd287aee4bc310f8e047727ef5682e7c2",messageTransmitterState:"0x98234bd0fa9ac12cc0a20a144a22e36d6a32f7e0a97baaeaf9c76cdc6d122d2e",usdcTreasury:"0x7170137d4a6431bf83351ac025baf462909bffe2877d87716374fb42b9629ebe"}],["Mainnet",{tokenMessengerState:"0x45993eecc0382f37419864992c12faee2238f5cfe22b98ad3bf455baf65c8a2f",messageTransmitterState:"0xf68268c3d9b1df3215f2439400c1c4ea08ac4ef4bb7d6f3ca6a2a239e17510af",usdcTreasury:"0x57d6725e7a8b49a7b2a612f6bd66ab5f39fc95332ca48be421c3229d514a6de7"}]],[0,1]);class rE{constructor(e,t,r,i){var n,a,o,u;if(d(this,"network"),d(this,"chain"),d(this,"provider"),d(this,"contracts"),d(this,"usdcId"),d(this,"usdcTreasuryId"),d(this,"tokenMessengerId"),d(this,"tokenMessengerStateId"),d(this,"messageTransmitterId"),d(this,"messageTransmitterStateId"),this.network=e,this.chain=t,this.provider=r,this.contracts=i,"Devnet"===e)throw Error("CircleBridge not supported on Devnet");let l=(0,s.bw).get(this.network,this.chain);if(!l)throw Error(`No USDC contract configured for network=${this.network} chain=${this.chain}`);let{tokenMessengerState:c,messageTransmitterState:f,usdcTreasury:p}=rx(e);if(!(null!=(n=i.cctp)&&n.tokenMessenger))throw Error(`Circle Token Messenger contract for domain ${t} not found`);if(!(null!=(a=i.cctp)&&a.messageTransmitter))throw Error(`Circle Message Transmitter contract for domain ${t} not found`);this.usdcId=l,this.usdcTreasuryId=p,this.tokenMessengerId=null==(o=i.cctp)?void 0:o.tokenMessenger,this.messageTransmitterId=null==(u=i.cctp)?void 0:u.messageTransmitter,this.tokenMessengerStateId=c,this.messageTransmitterStateId=f}async *transfer(e,t,r){let i=new rj,n=(0,s.bu).get(this.network,t.chain),[a,...u]=await (0,o.S).getCoins(this.provider,e,this.usdcId);if(void 0===a)throw Error("No USDC in wallet");let l=i.object(a.coinObjectId);u.length>0&&i.mergeCoins(l,u.map(e=>i.object(e.coinObjectId)));let[c]=i.splitCoins(l,[r]);i.moveCall({target:`${this.tokenMessengerId}::deposit_for_burn::deposit_for_burn`,arguments:[c,i.pure.u32(n),i.pure.address(t.address.toUniversalAddress().toString()),i.object(this.tokenMessengerStateId),i.object(this.messageTransmitterStateId),i.object("0x403"),i.object(this.usdcTreasuryId)],typeArguments:[this.usdcId]}),yield this.createUnsignedTx(i,"Sui.CircleBridge.Transfer")}async isTransferCompleted(e){let t=new rj;t.moveCall({target:`${this.messageTransmitterId}::state::is_nonce_used`,arguments:[t.object(this.messageTransmitterStateId),t.pure.u32(e.sourceDomain),t.pure.u64(e.nonce)]});let r=await this.provider.devInspectTransactionBlock({sender:"0x0000000000000000000000000000000000000000000000000000000000000000",transactionBlock:t});try{return!!r.results[0].returnValues[0][0][0]}catch(e){return console.error(`Error reading if nonce was used: ${e}`),!1}}async *redeem(e,t,r){let i=new rj,[n]=i.moveCall({target:`${this.messageTransmitterId}::receive_message::receive_message`,arguments:[i.pure((0,o.u)((0,s.bv).serialize(t))),i.pure((0,o.u)((0,s.r).decode(r))),i.object(this.messageTransmitterStateId)]});if(!n)throw Error("Failed to produce receipt");let[a]=i.moveCall({target:`${this.tokenMessengerId}::handle_receive_message::handle_receive_message`,arguments:[n,i.object(this.tokenMessengerStateId),i.object("0x403"),i.object(this.usdcTreasuryId)],typeArguments:[this.usdcId]});if(!a)throw Error("Failed to produce stamp receipt ticket with burn message");let[u]=i.moveCall({target:`${this.tokenMessengerId}::handle_receive_message::deconstruct_stamp_receipt_ticket_with_burn_message`,arguments:[a]});if(!u)throw Error("Failed to produce stamp receipt ticket");let[l]=i.moveCall({target:`${this.messageTransmitterId}::receive_message::stamp_receipt`,arguments:[u,i.object(this.messageTransmitterStateId)],typeArguments:[`${this.tokenMessengerId}::message_transmitter_authenticator::MessageTransmitterAuthenticator`]});if(!l)throw Error("Failed to produce stamped receipt");i.moveCall({target:`${this.messageTransmitterId}::receive_message::complete_receive_message`,arguments:[l,i.object(this.messageTransmitterStateId)]}),yield this.createUnsignedTx(i,"Sui.CircleBridge.Redeem")}async parseTransactionDetails(e){var t;let r=await this.provider.waitForTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0,showInput:!0}});if(!r)throw Error("Transaction not found");if(!r.events)throw Error("Transaction events not found");let i=null==(t=r.events)?void 0:t.find(e=>e.type.includes("send_message::MessageSent"));if(!i)throw Error("No MessageSent event found");let n=new Uint8Array((null==i?void 0:i.parsedJson).message),[a,o]=(0,s.bv).deserialize(n),{payload:u}=a,l=u.messageSender,c=u.mintRecipient,d=(0,s.bx)(this.network,a.sourceDomain),f=(0,s.bx)(this.network,a.destinationDomain),p={chain:d,address:u.burnToken};return{from:{chain:d,address:l},to:{chain:f,address:c},token:p,amount:u.amount,message:a,id:{hash:o}}}static async fromRpc(e,t){let[r,i]=await (0,o.S).chainFromRpc(e),n=t[i];if(n.network!==r)throw Error(`Network mismatch: ${n.network} != ${r}`);return new rE(r,i,e,n.contracts)}createUnsignedTx(e,t,r=!1){return new u.S(e,this.network,this.chain,t,r)}}(0,s.bj)("Sui","CircleBridge",rE)},{"./index-DTF6KsXj.mjs":"ieLDt","./sui-Dhwkelcg.mjs":"dxzPC","./unsignedTransaction-BD81leu1.mjs":"eqkOn","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],eqkOn:[function(e,t,r,i){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"S",()=>u);var a=Object.defineProperty,s=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o=(e,t,r)=>s(e,"symbol"!=typeof t?t+"":t,r);class u{constructor(e,t,r,i,n=!1){o(this,"transaction"),o(this,"network"),o(this,"chain"),o(this,"description"),o(this,"parallelizable"),this.transaction=e,this.network=t,this.chain=r,this.description=i,this.parallelizable=n}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}]},[],0,"parcelRequire94c2");
//# sourceMappingURL=index-BazHKqjw.86ebe48b.js.map
