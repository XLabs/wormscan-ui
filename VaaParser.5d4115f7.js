!function(e,t,n,s,a){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof r[s]&&r[s],l=i.cache||{},o="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,n){if(!l[t]){if(!e[t]){var a="function"==typeof r[s]&&r[s];if(!n&&a)return a(t,!0);if(i)return i(t,!0);if(o&&"string"==typeof t)return o(t);var d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}p.resolve=function(n){var s=e[t][1][n];return null!=s?s:n},p.cache={};var u=l[t]=new c.Module(t);e[t][0].call(u.exports,p,u,u.exports,r)}return l[t].exports;function p(e){var t=p.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=l,c.parent=i,c.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(c,"root",{get:function(){return r[s]}}),r[s]=c;for(var d=0;d<t.length;d++)c(t[d])}({dT6wg:[function(e,t,n,s){var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(n);var r=e("react/jsx-runtime"),i=e("react"),l=e("react-dom/client"),o=e("@wormhole-foundation/sdk"),c=e("src/layouts/BaseLayout"),d=e("src/utils/hooks"),u=e("src/analytics"),p=a.interopDefault(u),h=e("react-query"),m=e("src/api/Client"),f=e("src/components/atoms"),g=e("src/icons/generic"),x=e("src/components/molecules"),v=e("src/utils/wormhole"),y=e("src/consts"),j=e("src/utils/date"),w=e("react-router-dom"),C=e("src/context/EnvironmentContext"),N=e("src/utils/object"),T=e("src/utils/parser");e("./styles.scss");var A=e("aa1e68d3f3848aa").Buffer;n.default=()=>{(0,i.useEffect)(()=>{(0,p.default).page({title:"VAA_PARSER"})},[]);let{environment:e}=(0,C.useEnvironment)(),t=(0,w.useParams)(),n=t?.["*"],s=(0,d.useNavigateCustom)(),a=(0,i.useRef)(null),[u,b]=(0,i.useState)(null),[I,k]=(0,i.useState)(0),L=n?.includes("operation/"),[S,E]=(0,i.useState)(L?"":(0,T.processInputValue)(n)),[$,H]=(0,i.useState)(L?"base64":(0,T.processInputType)(n)),[M,V]=(0,i.useState)(L?n.replace("operation/",""):""),[q,D]=(0,i.useState)(!1),[B,O]=(0,i.useState)(null),[P,R]=(0,i.useState)(null),[F,W]=(0,i.useState)(!1),z=()=>{setTimeout(()=>{document.querySelectorAll(".json-view-key").forEach(e=>{if(e.innerHTML?.includes("guardianSignatures")){let t=e.parentElement,n=t.children?.[0];n&&n.click()}})},50)},J=(0,i.useCallback)(()=>{(0,T.waitForElement)(".json-view-key").then(()=>{document.querySelectorAll(".added-stuff").forEach(e=>e.remove()),document.querySelectorAll(".json-view-collapseIcon").forEach(e=>{let t=t=>{t.preventDefault(),t.stopPropagation(),"true"!==e.getAttribute("isCollapsed")?(e.setAttribute("isCollapsed","true"),e.parentElement.childNodes.forEach(t=>{"DIV"===t.tagName&&(t.style.display="none",e.style.transform="rotate(-90deg)")})):(e.setAttribute("isCollapsed","false"),e.parentElement.childNodes.forEach(t=>{"DIV"===t.tagName&&(t.style.display="block",e.style.transform="rotate(0deg)")}))};e.removeEventListener("click",t),e.addEventListener("click",t)}),document.querySelectorAll(".json-view-key").forEach(t=>{if(t.innerHTML?.includes("chain")||t.innerHTML?.includes("emitterChain")||t.innerHTML?.includes("fromChain")||t.innerHTML?.includes("recipientChain")||t.innerHTML?.includes("refundChainId")||t.innerHTML?.includes("targetChainId")||t.innerHTML?.includes("destinationChain")||t.innerHTML?.includes("sourceChainId")||t.innerHTML?.includes("destChainId")||t.innerHTML?.includes("toChain")||t.innerHTML?.includes("tokenChain")||t.innerHTML?.includes("feeChain")){let n=t.parentElement,s=+n.children?.[1]?.innerHTML,a=(0,v.getChainName)({chainId:s,network:e.network});if(a){let e=document.createElement("span");e.classList.add("added-stuff");let t=(0,l.createRoot)(e);n?.appendChild(e);let i=(0,v.getChainIcon)({chainId:s});t.render((0,r.jsxs)("div",{className:"chain-icon",children:[(0,r.jsx)("img",{src:i,alt:`${a} icon`,loading:"lazy",width:16,height:16}),(0,r.jsx)("span",{children:` (${a})`})]}))}}if(t.innerHTML?.includes("payloadType")){let e=t.parentElement,n=y.txType[+e.children?.[1]?.innerHTML]??!1;if(n){let t=document.createElement("span");t.classList.add("added-stuff");let s=(0,l.createRoot)(t);e?.appendChild(t),s.render((0,r.jsx)("span",{style:{marginLeft:4},children:` (${n})`}))}}if(t.innerHTML?.includes("timestamp")){let e=t.parentElement,n=e.children?.[1]?.innerHTML?.replaceAll('"',""),s=new Date(isNaN(+n)?n:1e3*+n),a=(0,j.formatDate)(s);if(a){let e=document.createElement("span");e.classList.add("copy-item"),e.classList.add("added-stuff");let n=(0,l.createRoot)(e);t.parentElement?.appendChild(e),n.render((0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:` // ${a}`}),(0,r.jsx)(()=>(0,r.jsx)(f.Tooltip,{tooltip:(0,r.jsx)("div",{children:"This is the timestamp of the block on the blockchain which emitted this VAA, not the time the VAA was signed by the guardians."}),type:"info",children:(0,r.jsx)("div",{className:"copy-item",children:(0,r.jsx)(g.InfoCircleIcon,{})})}),{})]}))}}}),document.querySelectorAll(".json-view-string, .json-view-number").forEach(e=>{if(e.innerHTML?.length>15){let t=document.createElement("span");t.classList.add("copy-item"),t.classList.add("added-stuff"),e.parentElement.appendChild(t);let n=(0,l.createRoot)(t),s=e.innerHTML.startsWith('"')&&e.innerHTML.endsWith('"')?e.innerHTML.slice(1,-1):e.innerHTML;n.render((0,r.jsx)(f.CopyContent,{text:s}))}}),document.querySelectorAll(".json-view-collapseIcon").forEach(e=>{let t=e.parentElement;if(t?.parentElement?.parentElement?.className==="json-view")return;let n=document.createElement("span");n.classList.add("copy-item"),n.classList.add("added-stuff");let s="json-view-key"===t.children[1].className?3:2,a=t.children[s];t.insertBefore(n,a);let i=(0,l.createRoot)(n),o=t.innerText.replace(/"[^"]*":/,"");o.endsWith(",")&&(o=o.slice(0,-1)),i.render((0,r.jsx)(f.CopyContent,{text:o}))})}).catch(e=>{})},[e.network]),_=(e,t)=>{let n=(0,y.getGuardianSet)(e);return n?.[t]?.name},{isError:Q,isLoading:U,isFetching:X}=(0,h.useQuery)(["getParsedVaa",S],()=>(0,m.getClient)().guardianNetwork.getParsedVaa(S),{enabled:!!S,retry:0,onSettled:async e=>{try{let e=A.from(S,"base64"),t=(0,o.deserialize)("Uint8Array",e),n=t.signatures.map(e=>({index:e.guardianIndex,signature:(0,o.encoding).b64.encode(e.signature.encode())})),{emitterAddress:s,hash:a,sequence:r,guardianSet:i,emitterChain:l}=t||{},c=s.toNative(l).toString(),d=A.from(a).toString("hex"),u=Number(r),p=n?.map(({index:e,signature:t})=>({index:e,signature:"0x"+A.from(o.encoding.b64.decode(t)).toString("hex"),name:_(i,e)}));delete t.signatures,R({...t,payload:t.payload?A.from(t.payload).toString("hex"):null,emitterAddress:c,emitterChain:(0,o.chainToChainId)(t.emitterChain),guardianSignatures:p,hash:d,sequence:u})}catch(e){R(null)}},onError:e=>{O(null)},onSuccess:e=>{e?.vaa?.guardianSetIndex&&e?.vaa?.guardianSignatures&&(e={...e,vaa:{...e.vaa,guardianSignatures:e.vaa.guardianSignatures.map(({index:t,signature:n})=>({index:t,signature:n,name:_(e?.vaa?.guardianSetIndex,t)}))}}),O(e);let t=`${e?.vaa?.emitterChain}/${e?.vaa?.emitterAddress}/${e?.vaa?.sequence}`;M||V(t),J(),z()}}),{isLoading:Z,isFetching:G}=(0,h.useQuery)(["getOperations",M],async()=>{let t;let n=M.split("/")?.length===3?{vaaID:M}:{txHash:M};try{t=await (0,m.getClient)().guardianNetwork.getOperations(n)}catch{}if(t?.length)return t;let a="Mainnet"===e.network?"Testnet":"Mainnet",r=await (0,m.getClient)(a).guardianNetwork.getOperations(n);return r?.length&&s(`/developers/vaa-parser/operation/${M}?network=${a}`),[]},{retry:0,enabled:!!M&&!S,onSuccess:t=>{if(t.length&&t[0].vaa?.raw){E(t[0].vaa?.raw);let n=t.map(e=>e.vaa?.raw).filter(e=>!!e);n.length>1&&(b(n),k(0)),a.current?.blur(),s(`/developers/vaa-parser/operation/${M}?network=${e.network}`,{replace:!0})}}}),K=B?.vaa?.sequence&&B?.vaa?.emitterChain&&B?.vaa?.emitterAddress?`${B?.vaa?.emitterChain}/${B?.vaa?.emitterAddress}/${B?.vaa?.sequence}`:P?.sequence&&P?.emitterChain&&P?.emitterAddress?`${P?.emitterChain}/${P?.emitterAddress}/${P?.sequence}`:"",Y=U||X||Z||G;return(0,r.jsx)(c.BaseLayout,{secondaryHeader:!0,children:(0,r.jsx)("div",{className:"devtools-page",children:(0,r.jsxs)("div",{className:"devtools-page-container",children:[(0,r.jsx)("h1",{className:"devtools-page-title",children:"VAA Parser"}),(0,r.jsx)("h2",{className:"devtools-page-description",children:"The VAA Parser tool allows decoding a VAA using input methods such as txHash, VAA ID (wormholeChainID, EmitterAddress, Sequence), a VAA in hexadecimal format, or base64 format"}),(0,r.jsx)("div",{className:"devtools-page-body",children:(0,r.jsxs)("div",{className:"parse",children:[(0,r.jsxs)("div",{className:"parse-txType",children:[(0,r.jsx)(g.SearchIcon,{width:24}),(0,r.jsx)("input",{type:"text",className:`parse-txType-input ${!M||S||Y?"":"error"}`,id:"parse-txType-input",placeholder:"Insert a TxHash or VAA ID",ref:a,value:M,onChange:t=>{E(""),b(null),k(0),V(t.target.value),a?.current?.blur(),s(`/developers/vaa-parser/operation/${t.target.value}?network=${e.network}`,{replace:!0})},name:"txType-input","aria-label":"Transaction hash or VAA ID input",spellCheck:!1})]}),M&&!S&&!Y&&(0,r.jsxs)("div",{className:"parse-txType-error",children:[(0,r.jsx)(g.AlertTriangle,{width:24}),"VAA cannot be found. Please try again or search something different."]}),M&&(0,r.jsxs)("div",{className:"parse-links",children:[(0,r.jsx)("button",{className:"parse-links-reset",onClick:()=>{b(null),k(0),E(""),V(""),O(null),R(null),s(`/developers/vaa-parser?network=${e.network}`)},children:"Reset search result"}),(!!B||!!P)&&S&&K&&(0,r.jsxs)(f.NavLink,{className:"parse-links-navlink",target:"_blank",to:`/tx/${M||K}`,children:[(0,r.jsx)("span",{children:"View transaction details"}),(0,r.jsx)(g.LinkIcon,{width:24})]})]}),!!u?.length&&(0,r.jsxs)("div",{className:"parse-multiple",children:[(0,r.jsxs)("span",{className:"parse-multiple-left",children:[(0,r.jsx)(g.InfoCircleIcon,{}),"This txHash has multiple VAAs."]}),(0,r.jsxs)("div",{className:"parse-multiple-right",onClick:()=>{u[I+1]?(E(u[I+1]),k(I+1)):(E(u[0]),k(0))},children:[(0,r.jsxs)("span",{className:"vaa-pages",children:[I+1,"/",u.length]}),(0,r.jsx)(g.TriangleDownIcon,{className:"triangle-icon",width:18})]})]}),(0,r.jsx)(x.InputEncodedVaa,{input:S,inputType:$,setInput:E,setInputType:H,setTxSearch:V,setInputs:b,setInputsIndex:k,page:"vaa-parser",network:e.network}),(0,r.jsxs)("div",{className:"parse-content",children:[(0,r.jsxs)("span",{className:`parse-content-title ${F?"":"rotate"}`,onClick:()=>W(!F),children:["Decoded VAA ",(0,r.jsx)(g.TriangleDownIcon,{})]}),(0,r.jsxs)("div",{className:`parse-result ${S?"with-data":""} ${F?"hide":""}`,id:"parse-result","aria-label":"Parsed result",children:[(0,r.jsxs)("div",{className:"parse-result-top",children:[(0,r.jsxs)("div",{className:"parse-result-top-btns",children:[(0,r.jsx)("button",{className:`parse-result-top-btn ${q?"":"active"}`,onClick:()=>{J(),z(),D(!1)},children:"Parsed"}),(0,r.jsx)("button",{className:`parse-result-top-btn ${q?"active":""}`,onClick:()=>{J(),z(),D(!0)},children:"Raw"})]}),(0,r.jsx)("div",{className:"parse-result-top-copy",children:(0,r.jsxs)(x.CopyToClipboard,{toCopy:B&&!q?(0,N.stringifyWithBigInt)(B,4):P&&q?(0,N.stringifyWithBigInt)(P,4):"{}",children:["Copy all",(0,r.jsx)(g.CopyIcon,{width:24})]})})]}),(0,r.jsx)("div",{className:"parse-result-json",children:Q&&!P?(0,r.jsx)("span",{className:"parse-result-not-found",children:"Parsing failed"}):Y?(0,r.jsx)(f.Loader,{}):(0,r.jsxs)(r.Fragment,{children:[!P&&(0,r.jsx)("div",{className:"devtools-page-alert",children:(0,r.jsxs)("div",{className:"devtools-page-alert-info",children:[(0,r.jsx)(g.InfoCircleIcon,{}),(0,r.jsx)("p",{children:"Decoded VAA data will be displayed here"})]})}),(!!B||!!P)&&S&&K&&(0,r.jsx)("div",{className:"parse-result-json-text",children:(0,r.jsx)(f.JsonText,{data:B&&!q?B:P&&q?P:{}})})]})})]})]})]})})]})})})}},{aa1e68d3f3848aa:"dB11O","react/jsx-runtime":"1dlk8",react:"9njXz","react-dom/client":"hx7eL","@wormhole-foundation/sdk":"cHYNT","src/layouts/BaseLayout":"ibTEQ","src/utils/hooks":"2VXdL","src/analytics":"cr0zc","react-query":"dbjqN","src/api/Client":"bTumr","src/components/atoms":"jMZmV","src/icons/generic":"23xak","src/components/molecules":"f5gIB","src/utils/wormhole":"6bzfn","src/consts":"2l9qr","src/utils/date":"9wAFB","react-router-dom":"cgBkD","src/context/EnvironmentContext":"jjAhi","src/utils/object":"fTwhz","src/utils/parser":"dfcuZ","./styles.scss":"93elv","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],fTwhz:[function(e,t,n,s){var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(n),a.export(n,"deepCloneWithBigInt",()=>l),a.export(n,"stringifyWithBigInt",()=>o),a.export(n,"parseWithBigInt",()=>c),a.export(n,"getNestedProperty",()=>d),a.export(n,"stringifyWithStringBigInt",()=>p),a.export(n,"allKeys",()=>h);let r=(e,t)=>"bigint"==typeof t?t.toString()+"n":t,i=(e,t)=>"string"==typeof t&&/^[0-9]+n$/.test(t)?BigInt(t.slice(0,-1)):t,l=e=>JSON.parse(JSON.stringify(e,r),i),o=(e,t)=>JSON.stringify(e,r,t),c=e=>JSON.parse(e,i),d=(e,t)=>{if(t)return t.split(".").reduce((e,t)=>null==e?e:e[t],e)},u=(e,t)=>"bigint"==typeof t?t.toString():t,p=(e,t)=>JSON.stringify(e,u,t),h=e=>{let t=[];return Object.entries(e).forEach(([e,n])=>{"object"==typeof n?t.push(h(n).map(t=>`${e}.${t}`)):t.push(e)}),t.flat()}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"93elv":[function(){},{}]},[],0,"parcelRequire94c2");
//# sourceMappingURL=VaaParser.5d4115f7.js.map
