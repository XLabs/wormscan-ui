!function(e,a,i,s,r){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n="function"==typeof t[s]&&t[s],o=n.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(a,i){if(!o[a]){if(!e[a]){var r="function"==typeof t[s]&&t[s];if(!i&&r)return r(a,!0);if(n)return n(a,!0);if(l&&"string"==typeof a)return l(a);var d=Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}u.resolve=function(i){var s=e[a][1][i];return null!=s?s:i},u.cache={};var m=o[a]=new c.Module(a);e[a][0].call(m.exports,u,m,m.exports,t)}return o[a].exports;function u(e){var a=u.resolve(e);return!1===a?{}:c(a)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=o,c.parent=n,c.register=function(a,i){e[a]=[function(e,a){a.exports=i},{}]},Object.defineProperty(c,"root",{get:function(){return t[s]}}),t[s]=c;for(var d=0;d<a.length;d++)c(a[d])}({HnJC6:[function(e,a,i,s){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(i);var t=e("react/jsx-runtime"),n=e("react"),o=e("react-router-dom"),l=e("react-query"),c=e("src/analytics"),d=r.interopDefault(c),m=e("src/context/EnvironmentContext"),u=e("src/consts"),h=e("src/layouts/BaseLayout"),p=e("src/components/atoms"),x=e("src/components/organisms"),g=e("src/utils/wormhole"),j=e("src/utils/number"),f=e("src/utils/hooks"),T=e("src/utils/crypto"),v=e("src/utils/governorUtils"),y=e("src/api/Client"),b=e("src/icons/generic"),N=e("src/components/molecules"),S=e("../Txs");e("./styles.scss"),i.default=()=>{let[e,a]=(0,o.useSearchParams)(),[i,s]=(0,n.useState)("transactions"===e.get("view"));(0,n.useEffect)(()=>{(0,d.default).page({title:`GOVERNOR_${i?"TRANSACTIONS":"DASHBOARD"}`})},[]);let r=e=>{(0,d.default).page({title:`GOVERNOR_${e?"TRANSACTIONS":"DASHBOARD"}`}),s(e),a(a=>(a.set("view",e?"transactions":"dashboard"),a))},[c,w]=(0,n.useState)(!0),[C,L]=(0,n.useState)(!0),[D,I]=(0,n.useState)(!1),[k,H]=(0,n.useState)(!1),[A,U]=(0,n.useState)([]),[R,B]=(0,n.useState)([]),[E,M]=(0,n.useState)(!1),{environment:O}=(0,m.useEnvironment)(),z=O.network,q="Mainnet"===z,{width:$}=(0,f.useWindowSize)(),F=$>=u.BREAKPOINTS.desktop,P=(0,f.useNavigateCustom)();return(0,f.useLockBodyScroll)({isLocked:!F&&E}),(0,l.useQuery)(["getLimit"],()=>(0,y.getClient)().governor.getLimit(),{onError:()=>{I(!0),w(!1)},onSuccess:e=>{let a=[];e.filter(e=>e.notionalLimit>0&&e.maxTransactionSize>0).map(e=>{let{chainId:i,notionalLimit:s,maxTransactionSize:r,availableNotional:n}=e,o=e.availableNotional/e.notionalLimit*100,l=parseFloat((0,j.formatNumber)(o,2)),c=(0,g.getChainName)({chainId:e.chainId,network:z}),d={chainId:i,chainName:c,maxTransactionSize:r,notionalLimit:s,availableNotional:n,chain:(0,t.jsxs)("div",{className:"dashboard chain",children:[(0,t.jsx)(p.BlockchainIcon,{background:"var(--color-black-25)",chainId:i,className:"chain-icon",colorless:!1,network:z,size:24}),(0,t.jsx)("p",{children:c})]}),singleTransactionLimit:(0,t.jsxs)("div",{className:"dashboard big-transaction",children:[(0,t.jsxs)("h4",{children:["single tx limit ",(0,t.jsx)(v.SingleTxLimitTooltip,{})]}),(0,t.jsxs)("p",{children:[(0,j.formatNumber)(e.maxTransactionSize,0)," USD"]})]}),dailyLimit:(0,t.jsxs)("div",{className:"dashboard daily-limit",children:[(0,t.jsxs)("h4",{children:["daily limit ",(0,t.jsx)(v.DailyLimitTooltip,{})]}),(0,t.jsxs)("p",{children:[(0,j.formatNumber)(e.notionalLimit,0)," USD"]})]}),remainingTransactionLimit:(0,t.jsxs)("div",{className:"dashboard min-remaining",children:[(0,t.jsx)("div",{className:"min-remaining-container",children:(0,t.jsx)(p.Tooltip,{side:"left",tooltip:(0,t.jsxs)("div",{children:[l,"%"]}),children:(0,t.jsx)("div",{children:(0,t.jsx)(v.MinRemainingBar,{color:100-o>=80?"#FF884D":"var(--color-success-100)",percentage:o})})})}),(0,t.jsxs)("h4",{children:["remaining tx limit ",(0,t.jsx)(v.RemainingTxLimitTooltip,{})]}),(0,t.jsxs)("p",{children:[(0,j.formatNumber)(e.availableNotional,0)," USD"]})]})};a.push(d)}),U(a),w(!1)},enabled:q}),(0,l.useQuery)(["getEnqueuedTransactions"],()=>(0,y.getClient)().governor.getEnqueuedTransactions(),{onError:()=>{H(!0),L(!1)},onSuccess:async e=>{let a=[];await Promise.all(e.map(async e=>{let{chainId:i,releaseTime:s,status:r,txHash:n,amount:o}=e;if("issued"===r)return;let l=await (0,y.getClient)().guardianNetwork.getOperations({txHash:e.txHash}),c=(0,g.getChainName)({chainId:i,network:z}),d=(0,T.parseTx)({value:n,chainId:e.chainId}),m=l[0]?.data?.usdAmount||`${o}`,u=A?A.find(e=>e?.chainId===i):S.ETH_LIMIT,h=u?.maxTransactionSize<=Number(m),x=h?"Big transaction":"Daily limit exceeded",f=new Date(s),v=new Date,w=f.getTime()-v.getTime(),C=Math.floor(w/36e5),L=Math.floor(w%36e5/6e4),D=`${C<=0?"":`${C}h, `}${L<=0?"":`${L}m`} left`,I={chainName:c,parseTxHash:d,usdAmount:m,formatedStatus:x,releaseDate:f,chain:(0,t.jsxs)("div",{className:"txs chain",children:[(0,t.jsx)(p.BlockchainIcon,{background:"var(--color-black-25)",chainId:i,className:"chain-icon",colorless:!1,network:z,size:24}),(0,t.jsx)("p",{children:c})]}),txHash:(0,t.jsxs)("div",{className:"txs tx-hash",children:[(0,t.jsx)("h4",{children:"TX HASH"}),(0,t.jsx)(p.NavLink,{to:`/tx/${d}`,children:(0,T.shortAddress)(d).toUpperCase()}),(0,t.jsx)(N.CopyToClipboard,{toCopy:d,children:(0,t.jsx)(b.CopyIcon,{width:24})})]}),amount:(0,t.jsxs)("div",{className:"txs amount",children:[(0,t.jsx)("h4",{children:"AMOUNT"}),(0,t.jsxs)("p",{children:[(0,j.formatNumber)(+m,0)," USD"]})]}),status:(0,t.jsx)("div",{className:"txs status",children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h4",{children:"STATUS"}),(0,t.jsx)(b.StaticsIncreaseIcon,{style:{color:"var(--color-information-100)"},width:24}),(0,t.jsx)("p",{children:x})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h4",{children:"STATUS"}),(0,t.jsx)(b.PieChartIcon,{style:{color:"var(--color-alert-100)"},width:24}),(0,t.jsx)("p",{children:x})]})}),releaseTime:(0,t.jsxs)("div",{className:"txs release-time",children:[(0,t.jsx)("p",{children:D}),(0,t.jsx)(b.ClockIcon,{width:24})]}),viewDetails:(0,t.jsx)("div",{className:"txs view-details",children:(0,t.jsx)(p.NavLink,{to:`/tx/${d}`,children:"View details"})})};a.push(I)})),B(a),L(!1)},enabled:i&&C&&A?.length>0}),(0,t.jsx)(h.BaseLayout,{children:(0,t.jsxs)("section",{className:"governor",children:[(0,t.jsx)(p.GovernorHeader,{}),(0,t.jsxs)("div",{className:"governor-container",children:[(0,t.jsx)("div",{className:"governor-container-top",children:(0,t.jsx)("div",{className:"governor-container-top-btns",children:(0,t.jsx)(p.ToggleGroup,{ariaLabel:"Select type",items:[{label:"Dashboard",value:"dashboard",ariaLabel:"Dashboard"},{label:"Queued Transactions",value:"txs",ariaLabel:"Queued Transactions"}],onValueChange:e=>{r("txs"===e)},value:i?"txs":"dashboard"})})}),(0,t.jsx)("div",{className:"governor-container-table",children:i?D||k?(0,t.jsx)(N.ErrorPlaceholder,{}):(0,t.jsx)(x.Table,{trackTxsSortBy:!0,className:"governor-container-table-transactions",columns:F?v.columnsTransactions:[...v.columnsTransactions,{Header:"View Details",accessor:"viewDetails"}],data:R,emptyMessage:"There are no transactions queued in the governors.",defaultSortBy:{id:"releaseTime",desc:!1},isLoading:C,onRowClick:e=>{if(F){let{parseTxHash:a}=e||{};a&&P(`/tx/${a}`)}}}):D?(0,t.jsx)(N.ErrorPlaceholder,{}):(0,t.jsx)(x.Table,{className:`governor-container-table-dashboard ${F?"":"table-mobile-dashboard"}`,columns:v.columnsDashboard,data:A,emptyMessage:"There is no data to display.",defaultSortBy:{id:"dailyLimit",desc:!0},isLoading:c,trackTxsSortBy:!0})})]})]})})}},{"react/jsx-runtime":"1dlk8",react:"9njXz","react-router-dom":"cgBkD","react-query":"dbjqN","src/analytics":"cr0zc","src/context/EnvironmentContext":"jjAhi","src/consts":"2l9qr","src/layouts/BaseLayout":"ibTEQ","src/components/atoms":"jMZmV","src/components/organisms":"lKAW4","src/utils/wormhole":"6bzfn","src/utils/number":"c38zr","src/utils/hooks":"2VXdL","src/utils/crypto":"fjQNR","src/utils/governorUtils":"Ynrm7","src/api/Client":"bTumr","src/icons/generic":"23xak","src/components/molecules":"f5gIB","../Txs":"fSizI","./styles.scss":"i0mS3","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],Ynrm7:[function(e,a,i,s){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(i),r.export(i,"SingleTxLimitTooltip",()=>l),r.export(i,"DailyLimitTooltip",()=>c),r.export(i,"RemainingTxLimitTooltip",()=>d),r.export(i,"MinRemainingBar",()=>m),r.export(i,"columnsDashboard",()=>u),r.export(i,"columnsTransactions",()=>h);var t=e("react/jsx-runtime"),n=e("src/components/atoms"),o=e("src/icons/generic");let l=()=>(0,t.jsx)(n.Tooltip,{className:"governor-container-table-title-tooltip",maxWidth:!1,tooltip:(0,t.jsx)("div",{children:"Transactions exceeding this single-transaction threshold activate a 24-hour finality delay before being signed by Wormhole Guardians. These transactions are not included in the total value counted towards the 24-hour rolling period limit."}),type:"info",children:(0,t.jsx)("div",{children:(0,t.jsx)(o.InfoCircleIcon,{})})}),c=()=>(0,t.jsx)(n.Tooltip,{className:"governor-container-table-title-tooltip",maxWidth:!1,tooltip:(0,t.jsx)("div",{children:"Maximum total value of transactions that can be signed without delay in any 24-hour rolling period. If this limit is exceeded, additional transactions are delayed until earlier transactions age beyond this 24-hour window, thereby freeing up bandwidth to process the delayed transactions."}),type:"info",children:(0,t.jsx)("div",{children:(0,t.jsx)(o.InfoCircleIcon,{})})}),d=()=>(0,t.jsx)(n.Tooltip,{className:"governor-container-table-title-tooltip",maxWidth:!1,tooltip:(0,t.jsx)("div",{children:"This shows the remaining value of transaction volume that can be processed without delay today. Once this limit is reached, further transactions will be delayed until sufficient limit is available within the 24-hour rolling window."}),type:"info",children:(0,t.jsx)("div",{children:(0,t.jsx)(o.InfoCircleIcon,{})})}),m=({percentage:e,color:a})=>{let i=Math.round(e/100*13);return(0,t.jsx)("div",{className:"min-remaining-container-bar",children:Array.from({length:13},(e,s)=>(0,t.jsx)("div",{className:"min-remaining-container-bar-segment",style:{backgroundColor:s<1||s<i?a:void 0}},s))})},u=[{Header:"Chain",accessor:"chain",sortType:(e,a)=>{let i=e.original.chainName.toUpperCase(),s=a.original.chainName.toUpperCase();return i.localeCompare(s)}},{Header:"Single Transaction Limit",Tooltip:(0,t.jsx)(l,{}),accessor:"singleTransactionLimit",sortType:(e,a)=>e.original.maxTransactionSize-a.original.maxTransactionSize},{Header:"Daily Limit",Tooltip:(0,t.jsx)(c,{}),accessor:"dailyLimit",sortType:(e,a)=>e.original.notionalLimit-a.original.notionalLimit},{Header:"Remaining Transaction Limit",Tooltip:(0,t.jsx)(d,{}),accessor:"remainingTransactionLimit",sortType:(e,a)=>e.original.availableNotional-a.original.availableNotional}],h=[{Header:"Chain",accessor:"chain",sortType:(e,a)=>{let i=e.original.chainName.toUpperCase(),s=a.original.chainName.toUpperCase();return i.localeCompare(s)}},{Header:"Tx Hash",accessor:"txHash",sortType:(e,a)=>{let i=e.original.parseTxHash.toUpperCase(),s=a.original.parseTxHash.toUpperCase();return i.localeCompare(s)}},{Header:"Amount",accessor:"amount",sortType:(e,a)=>+e.original.usdAmount-+a.original.usdAmount},{Header:"Status",accessor:"status",sortType:(e,a)=>{let i=e.original.formatedStatus.toUpperCase(),s=a.original.formatedStatus.toUpperCase();return i.localeCompare(s)}},{Header:"Release Time",accessor:"releaseTime",sortType:(e,a)=>{let i=new Date(e.original.releaseDate),s=new Date(a.original.releaseDate);return i.getTime()-s.getTime()}}]},{"react/jsx-runtime":"1dlk8","src/components/atoms":"jMZmV","src/icons/generic":"23xak","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],i0mS3:[function(){},{}]},[],0,"parcelRequire94c2");
//# sourceMappingURL=Governor.86c14ce9.js.map
