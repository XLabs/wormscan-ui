!function(e,t,r,i,o){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof n[i]&&n[i],a=s.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,r){if(!a[t]){if(!e[t]){var o="function"==typeof n[i]&&n[i];if(!r&&o)return o(t,!0);if(s)return s(t,!0);if(l&&"string"==typeof t)return l(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}f.resolve=function(r){var i=e[t][1][r];return null!=i?i:r},f.cache={};var d=a[t]=new c.Module(t);e[t][0].call(d.exports,f,d,d.exports,n)}return a[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=a,c.parent=s,c.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(c,"root",{get:function(){return n[i]}}),n[i]=c;for(var u=0;u<t.length;u++)c(t[u])}({lrQiX:[function(e,t,r,i){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"default",()=>a);var n=e("./index-DTF6KsXj.mjs"),s=e("./signer-DzeHBSRL.mjs");let a={Address:n.f,Platform:n.e,getSigner:s.g,protocols:{WormholeCore:()=>e("f0f5ec10dd49e32d").then(e=>e.c$),TokenBridge:()=>e("617dbb91075ae75f"),CircleBridge:()=>e("d710e7aca6f75a4e")},getChain:(e,t,r)=>new n.S(t,new n.e(e,(0,n.c)(e,n.g,{[t]:r})))}},{"./index-DTF6KsXj.mjs":"ieLDt","./signer-DzeHBSRL.mjs":"1CzxT",f0f5ec10dd49e32d:"ebWTy","617dbb91075ae75f":"872NN",d710e7aca6f75a4e:"9lhsM","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],"1CzxT":[function(e,t,r,i){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"a",()=>h),o.export(r,"d",()=>m),o.export(r,"g",()=>c);var n=e("./index-DTF6KsXj.mjs"),s=Object.defineProperty,a=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t,r)=>a(e,"symbol"!=typeof t?t+"":t,r);async function c(e,t,r){let[i,o]=await (0,n.e).chainFromRpc(e),s="string"==typeof t?(0,n.at).fromSecretKey((0,n.au).decode(t)):t;if(null!=r&&r.priorityFee&&r.priorityFee.percentile&&r.priorityFee.percentile>1)throw Error("priorityFeePercentile must be a number between 0 and 1");return new u(e,o,s,(null==r?void 0:r.debug)??!1,(null==r?void 0:r.priorityFee)??{},(null==r?void 0:r.retries)??5,null==r?void 0:r.sendOpts)}class u{constructor(e,t,r,i=!1,o,n=5,s){l(this,"_rpc"),l(this,"_chain"),l(this,"_keypair"),l(this,"_debug"),l(this,"_priorityFee"),l(this,"_maxResubmits"),l(this,"_sendOpts"),this._rpc=e,this._chain=t,this._keypair=r,this._debug=i,this._priorityFee=o,this._maxResubmits=n,this._sendOpts=s,this._sendOpts=this._sendOpts??{preflightCommitment:this._rpc.commitment}}chain(){return this._chain}address(){return this._keypair.publicKey.toBase58()}retryable(e){var t;if(e instanceof n.av)return!0;if(!(e instanceof n.aw)||!e.message.includes("Transaction simulation failed"))return!1;if(e.message.includes("Blockhash not found"))return!0;let r=null==(t=e.logs)?void 0:t.find(e=>e.startsWith("Program log: Error: "));return!!r&&!!(r.includes("Not enough bytes")||r.includes("Unexpected length of input"))}async signAndSend(e){var t;let{blockhash:r,lastValidBlockHeight:i}=await (0,n.e).latestBlock(this._rpc),o=[];for(let s of e){let e;let{description:a,transaction:{transaction:l,signers:c}}=s;this._debug&&console.log(`Signing: ${a} for ${this.address()}`),null!=(t=this._priorityFee)&&t.percentile&&this._priorityFee.percentile>0&&(e=await d(this._rpc,l,this._priorityFee.percentile,this._priorityFee.percentileMultiple,this._priorityFee.min,this._priorityFee.max)),this._debug&&function(e){if((0,n.aj)(e)){console.log(e.signatures);let t=e.message,r=t.getAccountKeys();t.compiledInstructions.forEach(e=>{console.log("Program",r.get(e.programIdIndex).toBase58()),console.log("Data: ",(0,n.r).encode(e.data)),console.log("Keys: ",e.accountKeyIndexes.map(e=>[e,r.get(e).toBase58()]))})}else console.log(e.signatures),console.log(e.feePayer),e.instructions.forEach(e=>{console.log("Program",e.programId.toBase58()),console.log("Data: ",e.data.toString("hex")),console.log("Keys: ",e.keys.map(e=>[e,e.pubkey.toBase58()]))})}(l);for(let t=0;t<this._maxResubmits;t++)try{if((0,n.aj)(l)){if(e&&0===t){let t=(0,n.ak).decompile(l.message);t.instructions.push(...e),l.message=t.compileToV0Message()}l.message.recentBlockhash=r,l.sign([this._keypair,...c??[]])}else e&&0===t&&l.add(...e),l.recentBlockhash=r,l.lastValidBlockHeight=i,l.partialSign(this._keypair,...c??[]);this._debug&&console.log("Submitting transactions ");let{signature:s}=await (0,n.e).sendTxWithRetry(this._rpc,l.serialize(),this._sendOpts);o.push(s);break}catch(s){if(t===this._maxResubmits-1||!this.retryable(s))throw s;this._debug&&console.log(`Failed to send transaction on attempt ${t}, retrying: `,s);let{blockhash:e,lastValidBlockHeight:o}=await (0,n.e).latestBlock(this._rpc);i=o,r=e}}this._debug&&console.log("Waiting for confirmation for: ",o);let s=(await Promise.all(o.map(async e=>{try{return await this._rpc.confirmTransaction({signature:e,blockhash:r,lastValidBlockHeight:i},this._rpc.commitment)}catch(e){throw console.error("Failed to confirm transaction: ",e),e}}))).filter(e=>e.value.err).map(e=>e.value.err);if(s.length>0)throw Error(`Failed to confirm transaction: ${s}`);return o}}async function d(e,t,r=.5,i=1,o=1,s=1e8){let[a,l]=await Promise.all([f(e,t),h(e,t,r,i,o,s)]);return[(0,n.am).setComputeUnitLimit({units:a}),(0,n.am).setComputeUnitPrice({microLamports:l})]}async function f(e,t){var r;let i=25e4;try{let o=await ((0,n.aj)(t),e.simulateTransaction(t));o.value.err&&console.error(`Error simulating Solana transaction: ${o.value.err}`),null!=(r=null==o?void 0:o.value)&&r.unitsConsumed&&(i=Math.round(1.2*o.value.unitsConsumed))}catch(e){console.error(`Failed to calculate compute unit limit for Solana transaction: ${e}`)}return i}async function p(e,t){if(!(0,n.aj)(t))return t.instructions.flatMap(e=>e.keys).map(e=>e.isWritable?e.pubkey:null).filter(Boolean);{let r=(await Promise.all(t.message.addressTableLookups.map(t=>e.getAddressLookupTable(t.accountKey)))).map(e=>e.value).filter(e=>null!==e),i=t.message,o=i.getAccountKeys({addressLookupTableAccounts:r??void 0});return i.compiledInstructions.flatMap(e=>e.accountKeyIndexes).map(e=>i.isAccountWritable(e)?o.get(e):null).filter(Boolean)}}async function h(e,t,r=.5,i=1,o=1,n=1e8){let s=o,a=await p(e,t);try{let t=await e.getRecentPrioritizationFees({lockedWritableAccounts:a});if(t){let e=t.map(e=>e.prioritizationFee).sort((e,t)=>e-t),o=Math.ceil(e.length*r);if(e.length>o){let t=e[o];i>0&&(t*=i),s=Math.max(s,t)}}}catch(e){console.error("Error fetching Solana recent fees",e)}return Math.min(Math.max(s,o),n)}async function m(e,t,r=.5,i=1,o=1,s=1e8){let a=1e4*r;if(a<1||a>1e4)throw Error("percentile must be between 0.0001 and 1");let l=e._rpcRequest,c=[await p(e,t),{percentile:a}],u=await l("getRecentPrioritizationFees",c);if(u.error)throw Error(u.error);let d=u.result.map(e=>e.prioritizationFee);if(0===d.length)return o;let f=Math.floor((0,n.ar)(d)*(i>0?i:1));return(0,n.as)(f,o,s)}},{"./index-DTF6KsXj.mjs":"ieLDt","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],ebWTy:[function(e,t,r,i){t.exports=Promise.resolve(t.bundle.root("ieLDt"))},{}],"872NN":[function(e,t,r,i){t.exports=e("d1f16f64ea2d428f")(e("b77f973e5dfd9170").resolve("h0jbF")).then(()=>t.bundle.root("1mr7Z"))},{d1f16f64ea2d428f:"9wKyf",b77f973e5dfd9170:"gSiLw"}],"9lhsM":[function(e,t,r,i){t.exports=e("3cc109d1c2709134")(e("4a90577da0ddafb6").resolve("8F8Ae")).then(()=>t.bundle.root("cu6MT"))},{"3cc109d1c2709134":"9wKyf","4a90577da0ddafb6":"gSiLw"}]},[],0,"parcelRequire94c2");
//# sourceMappingURL=solana-CZMD0TuJ.e1183bd6.js.map
